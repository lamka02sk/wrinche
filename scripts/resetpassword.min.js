let baseURI="?route=";let route=$("meta[name=route]").attr("content");let URI=baseURI+route+"/";let locale;function showResponseMessage(b,a){let responseBox=$("span.response-box");responseBox.attr("data-locale",b);responseBox.html(locale.response[b]).addClass("active").addClass(a).delay(3000).queue(function(){$(this).removeClass("active").removeClass(a).attr("data-locale","").dequeue()})}function pushValidMessage(a,b){a=$(a);a.attr("data-locale",b);a.html(locale.validate[b])}function popValidMessage(a){$(a).html("").attr("data-locale","")}let translate=new Translate(["controls","system","resetpassword","validate","response"],"auth");locale=translate.getLocale();let language=translate.getLanguage();$("button.selector-option[data-value="+language+"]").click();$("div.outer-container, div.logo-box, img.logo-heading-charcoal, img.logo-heading-mustard, form.login-form").addClass("animate");$("div.control-panel p.controls-title").click(function(){$("div.panel-content").toggleClass("active")});initTheme("login");$("span.theme-option").click(function(){let theme=$(this).data("value");changeTheme(theme,"login");localStorage.setItem("theme_login",theme)});$("#language .selector-options .selector-option").click(function(){let currentLanguage=$("html").attr("lang");let language=$(this).data("value");if(currentLanguage===language){return false}let lc="ENGLISH";if(language==="sk"){lc="SLOVAK"}$(this).parent().parent().find(".selector-selected").attr("data-locale",lc);localStorage.setItem("locale_auth",language);translate=new Translate(["controls","system","resetpassword","validate","response"],"auth");locale=translate.getLocale()});function validateResetPassword(a){let input=a;let label=input.prev();let output=input.next();let text=input.val();let type=input.attr("name");let validationResult;let validate=new Validator;if(type==="hash"){return true}validationResult=validate[type](text);if(typeof(validationResult)==="string"){pushValidMessage(output,validationResult);label.removeClass("valid").addClass("error");return false}else{popValidMessage(output);label.removeClass("error").addClass("valid");return true}}$("input").on("change keydown keypress keyup mousedown click mouseup focusout",function(){validateResetPassword($(this))});$("button.reset-button").click(function(){let url=URI;let formsData={hash:$("form.login-form input[name=hash]").val(),password:$("form.login-form input[name=password]").val(),password_repeat:$("form.login-form input[name=password_repeat]").val()};if(formsData.hash.trim()===""||formsData.password.trim()===""||formsData.password_repeat.trim()===""){showResponseMessage("EMPTY_INPUT","error");return false}let valid=true;$("div.form-input").each(function(){if(!validateResetPassword($(this).find("input"))){valid=false}});if(!valid){return false}$.ajax({type:"POST",url:url+"reset-password",data:{"reset-password":formsData,csrf_token:$("meta[name=csrf_token]").attr("content")},contentType:"application/x-www-form-urlencoded; charset=utf-8",cache:false,success:function(a){a=JSON.parse(a);if(a.success){showResponseMessage(a.code,"success");window.location.href=URI+"login"}else{showResponseMessage(a.code,"error")}},error:function(a){a=JSON.parse(a.responseText);showResponseMessage(a.code,"error")}})});$("a.login-button").click(function(){window.location.href=URI+"login"});