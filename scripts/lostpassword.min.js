let baseURI="?route=";let route=$("meta[name=route]").attr("content");let URI=baseURI+route+"/";let locale;function showResponseMessage(b,a){let responseBox=$("span.response-box");responseBox.attr("data-locale",b);responseBox.html(locale.response[b]).addClass("active").addClass(a).delay(3000).queue(function(){$(this).removeClass("active").removeClass(a).attr("data-locale","").dequeue()})}function pushValidMessage(a,b){a=$(a);a.attr("data-locale",b);a.html(locale.validate[b])}function popValidMessage(a){$(a).html("").attr("data-locale","")}let translate=new Translate(["controls","system","lostpassword","validate","response"],"auth");locale=translate.getLocale();let language=translate.getLanguage();$("button.selector-option[data-value="+language+"]").click();$("div.outer-container, div.logo-box, img.logo-heading-charcoal, img.logo-heading-mustard, form.login-form").addClass("animate");$("div.control-panel p.controls-title").click(function(){$("div.panel-content").toggleClass("active")});initTheme("login");$("span.theme-option").click(function(){let theme=$(this).data("value");changeTheme(theme,"login");localStorage.setItem("theme_login",theme)});$("#language .selector-options .selector-option").click(function(){let currentLanguage=$("html").attr("lang");let language=$(this).data("value");if(currentLanguage===language){return false}let lc="ENGLISH";if(language==="sk"){lc="SLOVAK"}$(this).parent().parent().find(".selector-selected").attr("data-locale",lc);localStorage.setItem("locale_auth",language);translate=new Translate(["controls","system","lostpassword","validate","response"],"auth");locale=translate.getLocale()});function validateLostPassword(){let validator=new Validator;let element=$("input[name=email]");let messageElement=element.next();let input=element.val();let label=element.prev();let validatorOutput=validator.email(input);if(typeof(validatorOutput)==="string"){pushValidMessage(messageElement,validatorOutput);label.removeClass("valid").addClass("error");return false}else{popValidMessage(messageElement);label.removeClass("error").addClass("valid");return true}}$("input").on("change keydown keypress keyup mousedown click mouseup focusout",function(){validateLostPassword()});$("button.forgot-button").click(function(){let url=URI;let formsData={email:$("form.login-form input[name=email]").val()};if(formsData.email.trim()===""){showResponseMessage("EMPTY_INPUT","error");return false}if(!validateLostPassword()){return false}$.ajax({type:"POST",url:url+"lost-password",data:{"lost-password":formsData,csrf_token:$("meta[name=csrf_token]").attr("content")},contentType:"application/x-www-form-urlencoded; charset=utf-8",cache:false,success:function(a){a=JSON.parse(a);if(a.success){showResponseMessage(a.code,"success")}else{showResponseMessage(a.code,"error")}},error:function(a){a=JSON.parse(a.responseText);showResponseMessage(a.code,"error")}})});$("a.login-button").click(function(){window.location.href=URI+"login"});