let baseURI="?route=";let route=$("meta[name=route]").attr("content");let URI=baseURI+route+"/";let locale;function showResponseMessage(b,a){let responseBox=$("span.response-box");responseBox.attr("data-locale",b);responseBox.html(locale.response[b]).addClass("active").addClass(a).delay(3000).queue(function(){$(this).removeClass("active").removeClass(a).attr("data-locale","").dequeue()})}let translate=new Translate(["controls","system","login","validate","response"],"auth");locale=translate.getLocale();let language=translate.getLanguage();$("button.selector-option[data-value="+language+"]").click();$("div.outer-container, div.logo-box, img.logo-heading-charcoal, img.logo-heading-mustard, form.login-form").addClass("animate");$("div.control-panel p.controls-title").click(function(){$("div.panel-content").toggleClass("active")});initTheme("login");$("span.theme-option").click(function(){let theme=$(this).data("value");changeTheme(theme,"login");localStorage.setItem("theme_login",theme)});$("#language .selector-options .selector-option").click(function(){let currentLanguage=$("html").attr("lang");let language=$(this).data("value");if(currentLanguage===language){return false}let lc="ENGLISH";if(language==="sk"){lc="SLOVAK"}$(this).parent().parent().find(".selector-selected").attr("data-locale",lc);localStorage.setItem("locale_auth",language);translate=new Translate(["controls","system","login","validate","response"],"auth");locale=translate.getLocale()});$("button.login").click(function(){let url=URI;let formsData={username:$("form.login-form input[name=username]").val(),password:$("form.login-form input[name=password]").val()};if(formsData.username.trim()===""||formsData.password.trim()===""){showResponseMessage("EMPTY_INPUT","error");return false}$.ajax({type:"POST",url:url+"login",data:{login:formsData,csrf_token:$("meta[name=csrf_token]").attr("content")},contentType:"application/x-www-form-urlencoded; charset=utf-8",cache:false,success:function(a){a=JSON.parse(a);if(a.success){showResponseMessage(a.code,"success");window.location.href=url}else{showResponseMessage(a.code,"error")}if(a.code===3){$("div.password-question").addClass("show")}},error:function(a){a=JSON.parse(a.responseText);showResponseMessage(a.code,"error")}})});$("a.register").click(function(){window.location.href=URI+"register"});$("a.reset-password, span.reset-password").click(function(){window.location.href=URI+"lost-password"});