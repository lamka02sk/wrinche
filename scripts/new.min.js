function Category(){this.components=["title","url","description","parent","thumbnail","visibility"];this.title={data:{value:""},validate:function(){return(this.title.data.value.length<101&&this.title.data.value.length>0)}.bind(this),serialize:function(){return this.title.data.value}.bind(this),events:[{event:"change keyup",element:document.querySelector("input[name=new_category_name]"),content:function(a){this.title.data.value=a.target.value.trim()}.bind(this)}]};this.url={data:{value:""},validate:function(){if(this.url.data.value===""){return true}let url=(/^[a-z0-9][-a-z0-9]+[a-z0-9]$/.test(this.url.data.value));let len=(this.url.data.value.length<121&&this.url.data.value.length>2);return(url&&len)}.bind(this),serialize:function(){return this.url.data.value}.bind(this),events:[{event:"change keyup",element:document.querySelector("input[name=new_category_url]"),content:function(a){this.url.data.value=a.target.value.trim()}.bind(this)}]};this.description={data:{text:""},validate:function(){return(this.description.data.text.length<200)}.bind(this),serialize:function(){return this.description.data.text}.bind(this),events:[{event:"change keyup",element:document.querySelector("input[name=new_category_description]"),content:function(a){this.description.data.text=a.target.innerText.trim()}.bind(this)}]};this.parent={data:{value:""},validate:function(){}.bind(this),serialize:function(){}.bind(this),events:[]};this.thumbnail={data:{value:""},validate:function(){}.bind(this),serialize:function(){}.bind(this),events:[]};this.visibility={data:{value:""},validate:function(){}.bind(this),serialize:function(){}.bind(this),events:[]};initializeComponentEvents(this);this.validate=function(){};this.serialize=function(){}}function initializeComponentEvents(a){for(let i=0;i<a.components.length;++i){if(!(a.components[i] in a)){continue}if(a[a.components[i]].start){a[a.components[i]].start()}if(!a[a.components[i]]["events"]){continue}for(let j=0;j<a[a.components[i]]["events"].length;++j){let eventTemplate=a[a.components[i]]["events"][j];let eventList=eventTemplate.event.trim().split(" ");if(eventTemplate.element[0]!==undefined){for(let k=0;k<eventTemplate.element.length;++k){let element=eventTemplate.element[k];for(let l=0;l<eventList.length;++l){element.addEventListener(eventList[l],eventTemplate.content)}}}else{for(let k=0;k<eventList.length;++k){eventTemplate.element.addEventListener(eventList[k],eventTemplate.content)}}}}}previousScripts.push("new");$("div.counter").each(function(){let maxLen=$(this).attr("data-maxLength");$(this).text(maxLen);let current=$(this);let type=$(this).attr("data-input");if(type==="input"){let element=$(this).parent().find("input");element.on("change keydown keyup click focusout focusin",function(){let left=maxLen-element.val().trim().length;if(left<0){current.addClass("minus")}else{if(current.hasClass("minus")){current.removeClass("minus")}}current.text(left)})}else{let element=$(this).parent().find("textarea");element.on("change keydown keyup click focusout focusin",function(){let left=maxLen-element.val().trim().length;if(left<0){current.addClass("minus")}else{if(current.hasClass("minus")){current.removeClass("minus")}}current.text(left)})}});selector=new Selector();packery=$("div.content-content").packery({itemSelector:"div.settings-component",gutter:22});type=window.location.href.split("/");for(let i=0;i<type.length;++i){if(type[i]===""){type.splice(i,1)}}typeName=type[type.length-1];typeName=capitalizeFirstLetter(typeName);eval("components = new "+typeName);$("div.splash").addClass("done");