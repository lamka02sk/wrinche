function reloadStylesheets(){let queryString="?reload="+new Date().getTime();$('link[rel="stylesheet"]').each(function(){this.href=this.href.replace(/\?.*|$/,queryString)})}function showValidationResult(c,a,b,d){let messageBox=c.parentNode.querySelector("span.validate-message");if(b){if(messageBox.innerText===""){return true}messageBox.innerText="";messageBox.removeAttribute("data-locale");d();return true}if(messageBox.getAttribute("data-locale")===a){return true}messageBox.setAttribute("data-locale",a);let loopBreak=false;for(let i in translate.locale){for(let j in translate.locale[i]){if(j==a){messageBox.innerText=translate.locale[i][j];loopBreak=true;break}}if(loopBreak){break}}d()}function confirmAction(a,c){let confirmationElement=$("div.confirmation-menu");confirmationElement.css({display:"table"}).animate({opacity:1},150).addClass("open");confirmationElement.find("p.confirmation-action-message").text(a);confirmationElement.find("span.confirmation-action-proceed").click(function(){c();b();confirmationElement.animate({opacity:0},150).removeClass("open").delay(100).queue(function(){$(this).css({display:"none"}).dequeue()})});confirmationElement.find("span.confirmation-action-dismiss").click(function(){b();confirmationElement.animate({opacity:0},150).removeClass("open").delay(100).queue(function(){$(this).css({display:"none"}).dequeue()})});function b(){$("span.confirmation-action-proceed").off("click");$("span.confirmation-action-dismiss").off("click")}}function postData(a,b,c){responseBox.classList.add("loading");responseBox.classList.add("open");responseBox.querySelector("span.message-content").innerHTML=translate.locale["admin_header"]["HEADER_LOADING"];b.csrf_token=document.querySelector("meta[name=csrf_token]").getAttribute("content");$.ajax({url:a,method:"POST",data:b,async:false,success:function(d){c(d,"success")},error:function(d){c(d,"error")}})}let adminRoute=document.querySelector("meta[name=route]").getAttribute("content");let baseURI="?route=";let route=$("meta[name=route]").attr("content");let URI=baseURI+route+"/";let locale,tabsCount,packery,selector,languages;let previousScripts=[];let responseBox=document.querySelector("div.response-message");let body=document.querySelector("body");let root=window.location.href;root=root.split(adminRoute)[0]+adminRoute;let translations=["system","response","admin_header","admin_menu"];let addTranslations=document.querySelector("div.content-wrapper").getAttribute("data-locales");addTranslations=addTranslations.split(" ");for(let i=0;i<addTranslations.length;++i){if(translations.indexOf(addTranslations[i])!==-1){continue}translations.push(addTranslations[i])}let translate=new Translate(translations,false);let html=$("html");html.on("mouseover","[data-link]",function(){let link=URI+this.getAttribute("data-link");$("div.anchor-hover").addClass("show").text(link)});html.on("mouseleave","[data-link]",function(){$("div.anchor-hover").removeClass("show").text("")});function showMessage(b,a){let code=b;if(b===200){b=locale.register[b]}else{b=locale.response[b]}let messageBox=$("div.response-message span.message-content");let responseBox=$("div.response-message");responseBox.dequeue();messageBox.attr("data-locale",code).html(b);responseBox.removeClass("success","error").removeClass("loading").addClass(a).addClass("open").delay(5000).queue(function(){$(this).removeClass("open").dequeue()})}function LoaderStart(){responseBox.classList.add("loading");responseBox.classList.add("open");responseBox.querySelector("span.message-content").innerHTML=translate.locale["admin_header"]["HEADER_LOADING"]}function LoaderError(a){showMessage(a,"error")}function LoaderDone(b,a){let addTranslations=document.querySelector("div.content-wrapper").getAttribute("data-locales");addTranslations=addTranslations.split(" ");for(let i=0;i<addTranslations.length;++i){if(translations.indexOf(addTranslations[i])!==-1){continue}translations.push(addTranslations[i])}translate.translateLocales(addTranslations);let scriptName=previousScripts.pop();$('script[src="scripts/'+scriptName+'.min.js"]').remove();let newScript=a.split("/")[0];$("body").append('<script type="application/javascript" src="scripts/'+newScript+'.min.js"><\/script>');let menuLink=a.split("/")[0];$("nav li").removeClass("active");$('li[data-link="'+menuLink+'"]').addClass("active");setTimeout(function(){responseBox.classList.remove("loading");responseBox.classList.remove("open");responseBox.querySelector("span.message-content").innerText=""},400)}new Loader({domain:"admin",csrf:"csrf_token",root:root,targets:{content:"div.content-wrapper",subcontent:"div.content-subcontent",full:"html"},onStart:function(){LoaderStart()},onError:function(a){LoaderError(a)},onDone:function(b,a){LoaderDone(b,a)}});let closer=new Closer;let doc=$(document);doc.click(function(a){closer.closeElements(a.target)});let footerMore=$("span.footer-more");footerMore.click(function(){let footer=$("footer");if(!footer.hasClass("open")){footer.addClass("open");closer.addElement(footer)}else{footer.removeClass("open")}});$("div.header-account").click(function(){let dropdown=$("div.account-dropdown");if(!dropdown.hasClass("open")){dropdown.addClass("open");closer.addElement(dropdown)}});$("div.header-write").click(function(){$("div.fullscreen-wrapper.write-menu").css({display:"table"}).animate({opacity:1},150).addClass("open")});$("div.write-menu div.tails-tail").click(function(){$("div.write-menu span.header-close").click()});$("div.write-menu span.header-close").click(function(){$("div.fullscreen-wrapper.write-menu").animate({opacity:0},150).removeClass("open").delay(100).queue(function(){$(this).css({display:"none"}).dequeue()})});$(".logout").click(function(){window.location.href=URI+"logout"});html.on("click","div.mainline-search div.input-box",function(){$(this).find("input").focus()});window.onpopstate=function(a){let link=a.state.link;if(link===""){link="dashboard"}$('[data-link="'+link+'"]').click()};function initDatePicker(){flatpickr(".datetime-picker",{altFormat:true,dateFormat:"d.m.Y H:i:s",enableTime:true,enableSeconds:true,locale:translate.language});flatpickr(".date-picker",{altFormat:true,dateFormat:"d.m.Y",locale:translate.language});flatpickr(".date-picker-max",{altFormat:true,dateFormat:"d.m.Y",maxDate:"today",locale:translate.language})};