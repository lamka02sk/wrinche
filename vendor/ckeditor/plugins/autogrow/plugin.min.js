"use strict";(function(){CKEDITOR.plugins.add("autogrow",{init:function(b){if(b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE){return}b.on("instanceReady",function(){if(b.editable().isInline()){b.ui.space("contents").setStyle("height","auto")}else{a(b)}})}});function a(i){var k,p,q,m,e,d=i.config.autoGrow_bottomSpace||0,g=i.config.autoGrow_minHeight!==undefined?i.config.autoGrow_minHeight:200,c=i.config.autoGrow_maxHeight||Infinity,b=!i.config.autoGrow_maxHeight;i.addCommand("autogrow",{exec:n,modes:{wysiwyg:1},readOnly:1,canUndo:false,editorFocus:false});var l={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1};for(var f in l){i.on(f,function(r){if(r.editor.mode=="wysiwyg"){setTimeout(function(){if(j()){k=null;return}n();if(!b){n()}},100)}})}i.on("afterCommandExec",function(r){if(r.data.name=="maximize"&&r.editor.mode=="wysiwyg"){if(r.data.command.state==CKEDITOR.TRISTATE_ON){m.removeStyle("overflow-y")}else{n()}}});i.on("contentDom",h);h();if(i.config.autoGrow_onStartup&&i.editable().isVisible()){i.execCommand("autogrow")}function h(){p=i.document;q=p[CKEDITOR.env.ie?"getBody":"getDocumentElement"]();m=CKEDITOR.env.quirks?p.getBody():p.getDocumentElement();var r=CKEDITOR.env.quirks?m:m.findOne("body");if(r){r.setStyle("height","auto");r.setStyle("min-height",CKEDITOR.env.safari?"0%":"auto")}e=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",p)}function j(){var r=i.getCommand("maximize");return(!i.window||r&&r.state==CKEDITOR.TRISTATE_ON)}function o(){q.append(e);var r=e.getDocumentPosition(p).y+e.$.offsetHeight;e.remove();return r}function n(){if(b){m.setStyle("overflow-y","hidden")}var s=i.window.getViewPaneSize().height,r=o();r+=d;r=Math.max(r,g);r=Math.min(r,c);if(r!=s&&k!=r){r=i.fire("autoGrow",{currentHeight:s,newHeight:r}).newHeight;i.resize(i.container.getStyle("width"),r,true);k=r}if(!b){if(r<c&&m.$.scrollHeight>m.$.clientHeight){m.setStyle("overflow-y","hidden")}else{m.removeStyle("overflow-y")}}}}})();