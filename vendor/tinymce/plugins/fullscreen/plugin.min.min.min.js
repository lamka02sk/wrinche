tinymce.PluginManager.add("fullscreen",function(c){function o(){var h,k,g=window,j=document,b=j.body;return b.offsetWidth&&(h=b.offsetWidth,k=b.offsetHeight),g.innerWidth&&g.innerHeight&&(h=g.innerWidth,k=g.innerHeight),{w:h,h:k}}function i(){var b=tinymce.DOM.getViewPort();return{x:b.x,y:b.y}}function r(b){scrollTo(b.x,b.y)}function e(){function k(){d.setStyle(b,"height",o().h-(j.clientHeight-b.clientHeight))}var g,j,b,h,p=document.body,m=document.documentElement;a=!a,j=c.getContainer(),g=j.style,b=c.getContentAreaContainer().firstChild,h=b.style,a?(u=i(),l=h.width,t=h.height,h.width=h.height="100%",f=g.width,s=g.height,g.width=g.height="",d.addClass(p,"mce-fullscreen"),d.addClass(m,"mce-fullscreen"),d.addClass(j,"mce-fullscreen"),d.bind(window,"resize",k),k(),n=k):(h.width=l,h.height=t,f&&(g.width=f),s&&(g.height=s),d.removeClass(p,"mce-fullscreen"),d.removeClass(m,"mce-fullscreen"),d.removeClass(j,"mce-fullscreen"),d.unbind(window,"resize",n),r(u)),c.fire("FullscreenStateChanged",{state:a})}var l,t,n,f,s,u,a=!1,d=tinymce.DOM;if(!c.settings.inline){return c.on("init",function(){c.addShortcut("Ctrl+Shift+F","",e)}),c.on("remove",function(){n&&d.unbind(window,"resize",n)}),c.addCommand("mceFullScreen",e),c.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){e(),c.focus()},onPostRender:function(){var b=this;c.on("FullscreenStateChanged",function(g){b.active(g.state)})},context:"view"}),c.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:e,onPostRender:function(){var b=this;c.on("FullscreenStateChanged",function(g){b.active(g.state)})}}),{isFullscreen:function(){return a}}}});