tinymce.PluginManager.add("fullscreen",function(p){function y(){var f,c,l=window,d=document,a=d.body;return a.offsetWidth&&(f=a.offsetWidth,c=a.offsetHeight),l.innerWidth&&l.innerHeight&&(f=l.innerWidth,c=l.innerHeight),{w:f,h:c}}function h(){var a=tinymce.DOM.getViewPort();return{x:a.x,y:a.y}}function b(a){scrollTo(a.x,a.y)}function k(){function d(){m.setStyle(a,"height",y().h-(e.clientHeight-a.clientHeight))}var l,e,a,f,c=document.body,n=document.documentElement;q=!q,e=p.getContainer(),l=e.style,a=p.getContentAreaContainer().firstChild,f=a.style,q?(v=h(),g=f.width,w=f.height,f.width=f.height="100%",j=l.width,x=l.height,l.width=l.height="",m.addClass(c,"mce-fullscreen"),m.addClass(n,"mce-fullscreen"),m.addClass(e,"mce-fullscreen"),m.bind(window,"resize",d),d(),z=d):(f.width=g,f.height=w,j&&(l.width=j),x&&(l.height=x),m.removeClass(c,"mce-fullscreen"),m.removeClass(n,"mce-fullscreen"),m.removeClass(e,"mce-fullscreen"),m.unbind(window,"resize",z),b(v)),p.fire("FullscreenStateChanged",{state:q})}var g,w,z,j,x,v,q=!1,m=tinymce.DOM;if(!p.settings.inline){return p.on("init",function(){p.addShortcut("Ctrl+Shift+F","",k)}),p.on("remove",function(){z&&m.unbind(window,"resize",z)}),p.addCommand("mceFullScreen",k),p.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){k(),p.focus()},onPostRender:function(){var a=this;p.on("FullscreenStateChanged",function(c){a.active(c.state)})},context:"view"}),p.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:k,onPostRender:function(){var a=this;p.on("FullscreenStateChanged",function(c){a.active(c.state)})}}),{isFullscreen:function(){return q}}}});