!function(d,b){function g(k,i){for(var l,j=[],h=0;h<k.length;++h){if(l=f[k[h]]||a(k[h]),!l){throw"module definition dependecy not found: "+k[h]}j.push(l)}i.apply(null,j)}function c(k,j,h){if("string"!=typeof k){throw"invalid module definition, module id must be defined and be a string"}if(j===b){throw"invalid module definition, dependencies must be specified"}if(h===b){throw"invalid module definition, definition function must be specified"}g(j,function(){f[k]=h.apply(null,arguments)})}function a(h){for(var k=d,j=h.split(/[.\/]/),e=0;e<j.length;++e){if(!k[j[e]]){return}k=k[j[e]]}return k}var f={};c("tinymce/tableplugin/Utils",["tinymce/Env"],function(j){function h(e){(!j.ie||j.ie>9)&&(e.hasChildNodes()||(e.innerHTML='<br data-mce-bogus="1" />'))}var k=function(l){return function(e,m){e&&(m=parseInt(m,10),1===m||0===m?e.removeAttribute(l,1):e.setAttribute(l,m,1))}},i=function(l){return function(e){return parseInt(e.getAttribute(l)||1,10)}};return{setColSpan:k("colSpan"),setRowSpan:k("rowspan"),getColSpan:i("colSpan"),getRowSpan:i("rowSpan"),setSpanVal:function(n,l,m){k(l)(n,m)},getSpanVal:function(m,l){return i(l)(m)},paddCell:h}}),c("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(q,z){var k=function(l,i,o){return l[o]?l[o][i]:null},h=function(s,n,o){var l=k(s,n,o);return l?l.elm:null},p=function(F,D,C,G){var r,E,n=0,B=h(F,D,C);for(r=C;(G>0?r<F.length:r>=0)&&(E=k(F,D,r),B===E.elm);r+=G){n++}return n},j=function(B,s,D){for(var u,l=B[D],C=s;C<l.length;C++){if(u=l[C],u.real){return u.elm}}return null},x=function(u,C){for(var t,B=[],i=u[C],l=0;l<i.length;l++){t=i[l],B.push({elm:t.elm,above:p(u,l,C,-1)-1,below:p(u,l,C,1)-1}),l+=z.getColSpan(t.elm)-1}return B},A=function(s,t){var o=s.elm.ownerDocument,l=o.createElement("td");return z.setColSpan(l,z.getColSpan(s.elm)),z.setRowSpan(l,t),z.paddCell(l),l},m=function(u,o,B,s){var l=j(u,B+1,s);l?l.parentNode.insertBefore(o,l):(l=j(u,0,s),l.parentNode.appendChild(o))},y=function(t,B,s,l){if(0!==B.above){z.setRowSpan(B.elm,B.above);var u=A(B,B.below+1);return m(t,u,s,l),u}return null},w=function(t,B,s,l){if(0!==B.below){z.setRowSpan(B.elm,B.above+1);var u=A(B,B.below);return m(t,u,s,l+1),u}return null},v=function(u,E,r,D){var B=x(u,r),e=h(u,E,r).parentNode,C=[];return q.each(B,function(l,o){var i=D?y(u,l,o,r):w(u,l,o,r);null!==i&&C.push(C)}),{cells:C,row:e}};return{splitAt:v}}),c("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(m,q,l,j){var p=m.each,h=l.getSpanVal,k=l.setSpanVal;return function(aH,aD,aO){function aN(){aH.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function aM(u){return u===aH.getBody()}function aF(u,v){return u?(v=m.map(v.split(","),function(w){return w.toLowerCase()}),m.grep(u.childNodes,function(w){return m.inArray(v,w.nodeName.toLowerCase())!==-1})):[]}function aK(){var u=0;ae=[],i=0,p(["thead","tbody","tfoot"],function(v){var x=aF(aD,v)[0],w=aF(x,"tr");p(w,function(z,y){y+=u,p(aF(z,"td,th"),function(D,F){var B,E,C,A;if(ae[y]){for(;ae[y][F];){F++}}for(C=h(D,"rowspan"),A=h(D,"colspan"),E=y;E<y+C;E++){for(ae[E]||(ae[E]=[]),B=F;B<F+A;B++){ae[E][B]={part:v,real:E==y&&B==F,elm:D,rowspan:C,colspan:A}}}i=Math.max(i,F+1)})}),u+=w.length})}function aG(u){return aH.fire("newrow",{node:u}),u}function aL(u){return aH.fire("newcell",{node:u}),u}function aC(v,u){return v=v.cloneNode(u),v.removeAttribute("id"),v}function ay(v,u){var w;if(w=ae[u]){return w[v]}}function aP(v,u){return v[u]?v[u]:null}function at(w,u){for(var x=[],v=0;v<w.length;v++){x.push(ay(u,v))}return x}function aA(u){return u&&(!!az.getAttrib(u.elm,"data-mce-selected")||u==aO)}function aB(){var u=[];return p(aD.rows,function(v){p(v.cells,function(w){if(az.getAttrib(w,"data-mce-selected")||aO&&w==aO.elm){return u.push(v),!1}})}),u}function aq(){var u=0;return p(ae,function(v){if(p(v,function(w){aA(w)&&u++}),u){return !1}}),u}function ah(){var u=az.createRng();aM(aD)||(u.setStartAfter(aD),u.setEndAfter(aD),e.setRng(u),az.remove(aD))}function aR(w){var v,u={};return aH.settings.table_clone_elements!==!1&&(u=m.makeMap((aH.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),m.walk(w,function(y){var x;if(3==y.nodeType){return p(az.getParents(y.parentNode,null,w).reverse(),function(z){u[z.nodeName]&&(z=aC(z,!1),v?x&&x.appendChild(z):v=x=z,x=z)}),x&&(x.innerHTML=q.ie&&q.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1}},"childNodes"),w=aC(w,!1),aL(w),k(w,"rowSpan",1),k(w,"colSpan",1),v?w.appendChild(v):l.paddCell(w),w}function ac(){var v,u=az.createRng();return p(az.select("tr",aD),function(w){0===w.cells.length&&az.remove(w)}),0===az.select("tr",aD).length?(u.setStartBefore(aD),u.setEndBefore(aD),e.setRng(u),void az.remove(aD)):(p(az.select("thead,tbody,tfoot",aD),function(w){0===w.rows.length&&az.remove(w)}),aK(),void (aQ&&(v=ae[Math.min(ae.length-1,aQ.y)],v&&(e.select(v[Math.min(v.length-1,aQ.x)].elm,!0),e.collapse(!0)))))}function aI(z,B,w,u){var y,v,A,C,x;for(y=ae[B][z].elm.parentNode,A=1;A<=w;A++){if(y=az.getNext(y,"tr")){for(v=z;v>=0;v--){if(x=ae[B+A][v].elm,x.parentNode==y){for(C=1;C<=u;C++){az.insertAfter(aR(x),x)}break}}if(v==-1){for(C=1;C<=u;C++){y.insertBefore(aR(y.cells[0]),y.cells[0])}}}}}function ab(){p(ae,function(v,u){p(v,function(y,A){var x,w,z;if(aA(y)&&(y=y.elm,x=h(y,"colspan"),w=h(y,"rowspan"),x>1||w>1)){for(k(y,"rowSpan",1),k(y,"colSpan",1),z=0;z<x-1;z++){az.insertAfter(aR(y),y)}aI(A,u,w-1,x)}})})}function ad(x,v,y){for(var w=[],u=0;u<x.length;u++){(u<v||u>y)&&w.push(x[u])}return w}function av(u){return m.grep(u,function(v){return v.real===!1})}function au(w){for(var u=[],x=0;x<w.length;x++){var v=w[x].elm;u[u.length-1]!==v&&u.push(v)}return u}function ar(C,w,y,v,A){var D=0;if(A-y<1){return 0}for(var x=y+1;x<=A;x++){var B=ad(aP(C,x),w,v),z=av(B);B.length===z.length&&(m.each(au(z),function(u){l.setRowSpan(u,l.getRowSpan(u)-1)}),D++)}return D}function aj(C,w,y,v,A){var D=0;if(v-w<1){return 0}for(var x=w+1;x<=v;x++){var B=ad(at(C,x),y,A),z=av(B);B.length===z.length&&(m.each(au(z),function(u){l.setColSpan(u,l.getColSpan(u)-1)}),D++)}return D}function ai(B,H,F){var K,Q,J,z,O,N,M,G,I,L,y,P,D;if(B?(K=aJ(B),Q=K.x,J=K.y,z=Q+(H-1),O=J+(F-1)):(aQ=r=null,p(ae,function(v,u){p(v,function(w,C){aA(w)&&(aQ||(aQ={x:C,y:u}),r={x:C,y:u})})}),aQ&&(Q=aQ.x,J=aQ.y,z=r.x,O=r.y)),G=ay(Q,J),I=ay(z,O),G&&I&&G.part==I.part){ab(),aK(),P=ar(ae,Q,J,z,O),D=aj(ae,Q,J,z,O),G=ay(Q,J).elm;var x=z-Q-D+1,A=O-J-P+1;for(x===i&&A===ae.length&&(x=1,A=1),x===i&&A>1&&(A=1),k(G,"colSpan",x),k(G,"rowSpan",A),M=J;M<=O;M++){for(N=Q;N<=z;N++){ae[M]&&ae[M][N]&&(B=ae[M][N].elm,B!=G&&(L=m.grep(B.childNodes),p(L,function(u){G.appendChild(u)}),L.length&&(L=m.grep(G.childNodes),y=0,p(L,function(u){"BR"==u.nodeName&&y++<L.length-1&&G.removeChild(u)})),az.remove(B)))}}ac()}}function af(C){var x,v,z,y,F,E,D,B,w,A;if(p(ae,function(G,u){if(p(G,function(H){if(aA(H)&&(H=H.elm,F=H.parentNode,E=aG(aC(F,!1)),x=u,C)){return !1}}),C){return x===b}}),x!==b){for(y=0,A=0;y<ae[0].length;y+=A){if(ae[x][y]&&(v=ae[x][y].elm,A=h(v,"colspan"),v!=z)){if(C){if(x>0&&ae[x-1][y]&&(B=ae[x-1][y].elm,w=h(B,"rowSpan"),w>1)){k(B,"rowSpan",w+1);continue}}else{if(w=h(v,"rowspan"),w>1){k(v,"rowSpan",w+1);continue}}D=aR(v),k(D,"colSpan",v.colSpan),E.appendChild(D),z=v}}E.hasChildNodes()&&(C?F.parentNode.insertBefore(E,F):az.insertAfter(E,F))}}function ag(v,u){u=u||aB().length||1;for(var w=0;w<u;w++){af(v)}}function an(v){var w,u;p(ae,function(x){if(p(x,function(y,z){if(aA(y)&&(w=z,v)){return !1}}),v){return w===b}}),p(ae,function(A,z){var B,x,y;A[w]&&(B=A[w].elm,B!=u&&(y=h(B,"colspan"),x=h(B,"rowspan"),1==y?v?(B.parentNode.insertBefore(aR(B),B),aI(w,z,x-1,y)):(az.insertAfter(aR(B),B),aI(w,z,x-1,y)):k(B,"colSpan",B.colSpan+1),u=B))})}function am(v,u){u=u||aq()||1;for(var w=0;w<u;w++){an(v)}}function ap(u){return m.grep(ax(u),aA)}function ax(v){var u=[];return p(v,function(w){p(w,function(x){u.push(x)})}),u}function aa(){var u=[];if(aM(aD)){if(1==ae[0].length){return}if(ap(ae).length==ax(ae).length){return}}p(ae,function(v){p(v,function(x,w){aA(x)&&m.inArray(u,w)===-1&&(p(ae,function(z){var y,A=z[w].elm;y=h(A,"colSpan"),y>1?k(A,"colSpan",y-1):az.remove(A)}),u.push(w))})}),ac()}function s(){function v(x){var w,y;p(x.cells,function(z){var A=h(z,"rowSpan");A>1&&(k(z,"rowSpan",A-1),w=aJ(z),aI(w.x,w.y,1,1))}),w=aJ(x.cells[0]),p(ae[w.y],function(A){var z;A=A.elm,A!=y&&(z=h(A,"rowSpan"),z<=1?az.remove(A):k(A,"rowSpan",z-1),y=A)})}var u;u=aB(),aM(aD)&&u.length==aD.rows.length||(p(u.reverse(),function(w){v(w)}),ac())}function t(){var u=aB();if(!aM(aD)||u.length!=aD.rows.length){return az.remove(u),ac(),u}}function aw(){var u=aB();return p(u,function(v,w){u[w]=aC(v,!0)}),u}function aE(w,y){var x,v,u;w&&(x=j.splitAt(ae,aQ.x,aQ.y,y),v=x.row,m.each(x.cells,aL),u=m.map(w,function(z){return z.cloneNode(!0)}),y||u.reverse(),p(u,function(C){var A,B,z=C.cells.length;for(aG(C),A=0;A<z;A++){B=C.cells[A],aL(B),k(B,"colSpan",1),k(B,"rowSpan",1)}for(A=z;A<i;A++){C.appendChild(aL(aR(C.cells[z-1])))}for(A=i;A<z;A++){az.remove(C.cells[A])}y?v.parentNode.insertBefore(C,v):az.insertAfter(C,v)}),aN())}function aJ(v){var u;return p(ae,function(x,w){return p(x,function(z,y){if(z.elm==v){return u={x:y,y:w},!1}}),!u}),u}function n(u){aQ=aJ(u)}function o(){var v,u;return v=u=0,p(ae,function(x,w){p(x,function(B,z){var A,y;aA(B)&&(B=ae[w][z],z>v&&(v=z),w>u&&(u=w),B.real&&(A=B.colspan-1,y=B.rowspan-1,A&&z+A>v&&(v=z+A),y&&w+y>u&&(u=w+y)))})}),{x:v,y:u}}function ak(A){var E,x,v,z,w,C,F,y,D,B;if(r=aJ(A),aQ&&r){for(E=Math.min(aQ.x,r.x),x=Math.min(aQ.y,r.y),v=Math.max(aQ.x,r.x),z=Math.max(aQ.y,r.y),w=v,C=z,B=x;B<=z;B++){for(D=E;D<=v;D++){A=ae[B][D],A.real&&(F=A.colspan-1,y=A.rowspan-1,F&&D+F>w&&(w=D+F),y&&B+y>C&&(C=B+y))}}for(aN(),B=x;B<=C;B++){for(D=E;D<=w;D++){ae[B][D]&&az.setAttrib(ae[B][D].elm,"data-mce-selected","1")}}}}function ao(x,v){var y,w,u;y=aJ(x),w=y.y*i+y.x;do{if(w+=v,u=ay(w%i,Math.floor(w/i)),!u){break}if(u.elm!=x){return e.select(u.elm,!0),az.isEmpty(u.elm)&&e.collapse(!0),!0}}while(u.elm==x);return !1}function al(u){if(aQ){var v=j.splitAt(ae,aQ.x,aQ.y,u);m.each(v.cells,aL)}}var ae,i,aQ,r,e=aH.selection,az=e.dom;aD=aD||az.getParent(e.getStart(!0),"table"),aK(),aO=aO||az.getParent(e.getStart(!0),"th,td"),aO&&(aQ=aJ(aO),r=o(),aO=ay(aQ.x,aQ.y)),m.extend(this,{deleteTable:ah,split:ab,merge:ai,insertRow:af,insertRows:ag,insertCol:an,insertCols:am,splitCols:al,deleteCols:aa,deleteRows:s,cutRows:t,copyRows:aw,pasteRows:aE,getPos:aJ,setStartCell:n,setEndCell:ak,moveRelIdx:ao,refresh:aK})}}),c("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(m,k,q,l,j){var p=l.each,h=j.getSpanVal;return function(n){function e(){function s(B){function w(R,U){var u=R?"previousSibling":"nextSibling",y=n.dom.getParent(U,"tr"),T=y[u];if(T){return O(n,U,T,R),B.preventDefault(),!0}var C=n.dom.getParent(y,"table"),S=y.parentNode,Q=S.nodeName.toLowerCase();if("tbody"===Q||Q===(R?"tfoot":"thead")){var x=F(R,C,S,"tbody");if(null!==x){return P(R,x,U)}}return K(R,y,u,C)}function F(Q,y,S,C){var x=n.dom.select(">"+C,y),R=x.indexOf(S);if(Q&&0===R||!Q&&R===x.length-1){return E(Q,y)}if(R===-1){var u="thead"===S.tagName.toLowerCase()?0:x.length-1;return x[u]}return x[R+(Q?-1:1)]}function E(y,u){var C=y?"thead":"tfoot",x=n.dom.select(">"+C,u);return 0!==x.length?x[0]:null}function P(C,x,y){var u=J(x,C);return u&&O(n,y,u,C),B.preventDefault(),!0}function K(S,R,Q,T){var y=T[Q];if(y){return I(y),!0}var x=n.dom.getParent(T,"td,th");if(x){return w(S,x,B)}var C=J(R,!S);return I(C),B.preventDefault(),!1}function J(x,u){var y=x&&x[u?"lastChild":"firstChild"];return y&&"BR"===y.nodeName?n.dom.getParent(y,"td,th"):y}function I(u){n.selection.setCursorLocation(u,0)}function A(){return z==m.UP||z==m.DOWN}function G(x){var u=x.selection.getNode(),y=x.dom.getParent(u,"tr");return null!==y}function D(x){for(var u=0,y=x;y.previousSibling;){y=y.previousSibling,u+=h(y,"colspan")}return u}function H(y,u){var C=0,x=0;return p(y.children,function(R,Q){if(C+=h(R,"colspan"),x=Q,C>u){return !1}}),x}function O(R,C,T,Q){var y=D(n.dom.getParent(C,"td,th")),S=H(T,y),x=T.childNodes[S],u=J(x,Q);I(u||x)}function M(y){var u=n.selection.getNode(),C=n.dom.getParent(u,"td,th"),x=n.dom.getParent(y,"td,th");return C&&C!==x&&L(C,x)}function L(x,u){return n.dom.getParent(x,"TABLE")===n.dom.getParent(u,"TABLE")}var z=B.keyCode;if(A()&&G(n)){var N=n.selection.getNode();k.setEditorTimeout(n,function(){M(N)&&w(!B.shiftKey&&z===m.UP,N,B)},0)}}n.on("KeyDown",function(u){s(u)})}function i(){function s(y,w){var z,x=w.ownerDocument,u=x.createRange();return u.setStartBefore(w),u.setEnd(y.endContainer,y.endOffset),z=x.createElement("body"),z.appendChild(u.cloneContents()),0===z.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}n.on("KeyDown",function(w){var y,x,u=n.dom;37!=w.keyCode&&38!=w.keyCode||(y=n.selection.getRng(),x=u.getParent(y.startContainer,"table"),x&&n.getBody().firstChild==x&&s(y,x)&&(y=u.createRng(),y.setStartBefore(x),y.setEndBefore(x),n.selection.setRng(y),w.preventDefault()))})}function v(){n.on("KeyDown SetContent VisualAid",function(){var s;for(s=n.getBody().lastChild;s;s=s.previousSibling){if(3==s.nodeType){if(s.nodeValue.length>0){break}}else{if(1==s.nodeType&&("BR"==s.tagName||!s.getAttribute("data-mce-bogus"))){break}}}s&&"TABLE"==s.nodeName&&(n.settings.forced_root_block?n.dom.add(n.getBody(),n.settings.forced_root_block,n.settings.forced_root_block_attrs,q.ie&&q.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):n.dom.add(n.getBody(),"br",{"data-mce-bogus":"1"}))}),n.on("PreProcess",function(u){var s=u.node.lastChild;s&&("BR"==s.nodeName||1==s.childNodes.length&&("BR"==s.firstChild.nodeName||"\xa0"==s.firstChild.nodeValue))&&s.previousSibling&&"TABLE"==s.previousSibling.nodeName&&n.dom.remove(s)})}function t(){function u(B,D,y,w){var A,x,C,E=3,z=B.dom.getParent(D.startContainer,"TABLE");return z&&(A=z.parentNode),x=D.startContainer.nodeType==E&&0===D.startOffset&&0===D.endOffset&&w&&("TR"==y.nodeName||y==A),C=("TD"==y.nodeName||"TH"==y.nodeName)&&!w,x||C}function s(){var x=n.selection.getRng(),z=n.selection.getNode(),y=n.dom.getParent(x.startContainer,"TD,TH");if(u(n,x,z,y)){y||(y=z);for(var w=y.lastChild;w.lastChild;){w=w.lastChild}3==w.nodeType&&(x.setEnd(w,w.data.length),n.selection.setRng(x))}}n.on("KeyDown",function(){s()}),n.on("MouseDown",function(w){2!=w.button&&s()})}function o(){function s(w){n.selection.select(w,!0),n.selection.collapse(!0)}function u(w){n.$(w).empty(),j.paddCell(w)}n.on("keydown",function(z){if((z.keyCode==m.DELETE||z.keyCode==m.BACKSPACE)&&!z.isDefaultPrevented()){var A,x,w,y;if(A=n.dom.getParent(n.selection.getStart(),"table")){if(x=n.dom.select("td,th",A),w=l.grep(x,function(B){return !!n.dom.getAttrib(B,"data-mce-selected")}),0===w.length){return y=n.dom.getParent(n.selection.getStart(),"td,th"),void (n.selection.isCollapsed()&&y&&n.dom.isEmpty(y)&&(z.preventDefault(),u(y),s(y)))}z.preventDefault(),n.undoManager.transact(function(){x.length==w.length?n.execCommand("mceTableDelete"):(l.each(w,u),s(w[0]))})}}})}function r(){var D=function(u){return u&&"CAPTION"==u.nodeName&&"TABLE"==u.parentNode.nodeName},s=function(F,u){var G=n.selection.getRng(),E=F.ownerDocument.createTextNode("\xa0");G.startOffset?F.insertBefore(E,F.firstChild):F.appendChild(E),u&&(n.selection.select(E,!0),n.selection.collapse(!0))},y=function(u){return(u.keyCode==m.DELETE||u.keyCode==m.BACKSPACE)&&!u.isDefaultPrevented()},w=function(u){return u.firstChild===u.lastChild&&u.firstChild},B=function(u){return u&&3===u.nodeType},x=function(E){var u=w(E);return B(u)&&1===u.data.length?u.data:null},C=function(E){var u=w(E),F=x(E);return u&&!B(u)||F&&!z(F)},A=function(u){return n.dom.isEmpty(u)||z(x(u))},z=function(u){return"\xa0"===u};n.on("keydown",function(u){if(y(u)){var E=n.dom.getParent(n.selection.getStart(),"caption");D(E)&&(q.ie&&(n.selection.isCollapsed()?C(E)&&s(E):(n.undoManager.transact(function(){n.execCommand("Delete"),A(E)&&s(E,!0)}),u.preventDefault())),A(E)&&u.preventDefault())}})}o(),r(),q.webkit&&(e(),t()),q.gecko&&(i(),v()),q.ie>9&&(i(),v())}}),c("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(i,h,j){return function(e,v){function n(l){e.getBody().style.webkitUserSelect="",(l||q)&&(e.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),q=!1)}function B(m,l){return !(!m||!l)&&m===w.getParent(l,"table")}function D(l){var u,r,m=l.target;if(!y&&!k&&m!==z&&(z=m,A&&C)){if(r=w.getParent(m,"td,th"),B(A,r)||(r=w.getParent(A,"td,th")),C===r&&!q){return}if(v(!0),B(A,r)){l.preventDefault(),t||(t=new p(e,A,C),e.getBody().style.webkitUserSelect="none"),t.setEndCell(r),q=!0,u=e.selection.getSel();try{u.removeAllRanges?u.removeAllRanges():u.empty()}catch(p){}}}}var t,C,A,z,y,k,w=e.dom,q=!0,x=function(){C=t=A=z=null,v(!1)};return e.on("SelectionChange",function(l){q&&l.stopImmediatePropagation()},!0),e.on("MouseDown",function(l){2==l.button||y||k||(n(),C=w.getParent(l.target,"td,th"),A=w.getParent(C,"table"))}),e.on("mouseover",D),e.on("remove",function(){w.unbind(e.getDoc(),"mouseover",D),n()}),e.on("MouseUp",function(){function r(G,s){var H=new h(G,G);do{if(3==G.nodeType&&0!==j.trim(G.nodeValue).length){return void (s?m.setStart(G,0):m.setEnd(G,G.nodeValue.length))}if("BR"==G.nodeName){return void (s?m.setStartBefore(G):m.setEndBefore(G))}}while(G=s?H.next():H.prev())}var m,E,l,p,F,u=e.selection;if(C){if(t&&(e.getBody().style.webkitUserSelect=""),E=w.select("td[data-mce-selected],th[data-mce-selected]"),E.length>0){m=w.createRng(),p=E[0],m.setStartBefore(p),m.setEndAfter(p),r(p,1),l=new h(p,w.getParent(E[0],"table"));do{if("TD"==p.nodeName||"TH"==p.nodeName){if(!w.getAttrib(p,"data-mce-selected")){break}F=p}}while(p=l.next());r(F),u.setRng(m)}e.nodeChanged(),x()}}),e.on("KeyUp Drop SetContent",function(l){n("setcontent"==l.type),x(),y=!1}),e.on("ObjectResizeStart ObjectResized",function(l){y="objectresized"!=l.type}),e.on("dragstart",function(){k=!0}),e.on("drop dragend",function(){k=!1}),{clear:n}}}),c("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(i,h){var j=i.each;return function(e){function q(){var l=e.settings.color_picker_callback;if(l){return function(){var o=this;l.call(e,function(p){o.value(p).fire("change")},o.value())}}}function m(l){return{title:"Advanced",type:"form",defaults:{onchange:function(){w(l,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:q()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:q()}]}]}}function y(l){return l?l.replace(/px$/,""):""}function A(l){return/^[0-9]+$/.test(l)&&(l+="px"),l}function n(l){j("left center right".split(" "),function(o){e.formatter.remove("align"+o,{},l)})}function z(l){j("top middle bottom".split(" "),function(o){e.formatter.remove("valign"+o,{},l)})}function x(o,s,p){function l(u,B){return B=B||[],i.each(u,function(C){var r={text:C.text||C.title};C.menu?r.menu=l(C.menu):(r.value=C.value,s&&s(r)),B.push(r)}),B}return l(o,p||[])}function w(s,o,u){var p=o.toJSON(),l=s.parseStyle(p.style);u?(o.find("#borderColor").value(l["border-color"]||"")[0].fire("change"),o.find("#backgroundColor").value(l["background-color"]||"")[0].fire("change")):(l["border-color"]=p.borderColor,l["background-color"]=p.backgroundColor),o.find("#style").value(s.serializeStyle(s.parseStyle(s.serializeStyle(l))))}function v(p,l,s){var o=p.parseStyle(p.getAttrib(s,"style"));o["border-color"]&&(l.borderColor=o["border-color"]),o["background-color"]&&(l.backgroundColor=o["background-color"]),l.style=p.serializeStyle(o)}function k(s,o,p){var l=s.parseStyle(s.getAttrib(o,"style"));j(p,function(r){l[r.name]=r.value}),s.setAttrib(o,"style",s.serializeStyle(s.parseStyle(s.serializeStyle(l))))}var t=this;t.tableProps=function(){t.table(!0)},t.table=function(p){function H(){function C(L,J,K){if("TD"===L.tagName||"TH"===L.tagName){E.setStyle(L,J,K)}else{if(L.children){for(var I=0;I<L.children.length;I++){C(L.children[I],J,K)}}}}var u;w(E,this),F=i.extend(F,this.toJSON()),F["class"]===!1&&delete F["class"],e.undoManager.transact(function(){if(o||(o=e.plugins.table.insertTable(F.cols||1,F.rows||1)),e.dom.setAttribs(o,{style:F.style,"class":F["class"]}),e.settings.table_style_by_css){if(l=[],l.push({name:"border",value:F.border}),l.push({name:"border-spacing",value:A(F.cellspacing)}),k(E,o,l),E.setAttribs(o,{"data-mce-border-color":F.borderColor,"data-mce-cell-padding":F.cellpadding,"data-mce-border":F.border}),o.children){for(var I=0;I<o.children.length;I++){C(o.children[I],"border",F.border),C(o.children[I],"padding",A(F.cellpadding))}}}else{e.dom.setAttribs(o,{border:F.border,cellpadding:F.cellpadding,cellspacing:F.cellspacing})}E.getAttrib(o,"width")&&!e.settings.table_style_by_css?E.setAttrib(o,"width",y(F.width)):E.setStyle(o,"width",A(F.width)),E.setStyle(o,"height",A(F.height)),u=E.select("caption",o)[0],u&&!F.caption&&E.remove(u),!u&&F.caption&&(u=E.create("caption"),u.innerHTML=h.ie?"\xa0":'<br data-mce-bogus="1"/>',o.insertBefore(u,o.firstChild)),n(o),F.align&&e.formatter.apply("align"+F.align,{},o),e.focus(),e.addVisual()})}function r(I,C){function K(N,O){for(var M=0;M<O.length;M++){var L=E.getStyle(O[M],C);if("undefined"==typeof N&&(N=L),N!=L){return""}}return N}var u,J=e.dom.select("td,th",I);return u=K(u,J)}var o,s,G,B,D,l,E=e.dom,F={};p===!0?(o=E.getParent(e.selection.getStart(),"table"),o&&(F={width:y(E.getStyle(o,"width")||E.getAttrib(o,"width")),height:y(E.getStyle(o,"height")||E.getAttrib(o,"height")),cellspacing:y(E.getStyle(o,"border-spacing")||E.getAttrib(o,"cellspacing")),cellpadding:E.getAttrib(o,"data-mce-cell-padding")||E.getAttrib(o,"cellpadding")||r(o,"padding"),border:E.getAttrib(o,"data-mce-border")||E.getAttrib(o,"border")||r(o,"border"),borderColor:E.getAttrib(o,"data-mce-border-color"),caption:!!E.select("caption",o)[0],"class":E.getAttrib(o,"class")},j("left center right".split(" "),function(u){e.formatter.matchNode(o,"align"+u)&&(F.align=u)}))):(s={label:"Cols",name:"cols"},G={label:"Rows",name:"rows"}),e.settings.table_class_list&&(F["class"]&&(F["class"]=F["class"].replace(/\s*mce\-item\-table\s*/g,"")),B={name:"class",type:"listbox",label:"Class",values:x(e.settings.table_class_list,function(u){u.value&&(u.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[u.value]})})})}),D={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:e.settings.table_appearance_options!==!1?[s,G,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[s,G,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},B]},e.settings.table_advtab!==!1?(v(E,F,o),e.windowManager.open({title:"Table properties",data:F,bodyType:"tabpanel",body:[{title:"General",type:"form",items:D},m(E)],onsubmit:H})):e.windowManager.open({title:"Table properties",data:F,body:D,onsubmit:H})},t.merge=function(o,l){e.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var p=this.toJSON();e.undoManager.transact(function(){o.merge(l,p.cols,p.rows)})}})},t.cell=function(){function E(F,p,G){(1===C.length||G)&&D.setAttrib(F,p,G)}function r(F,p,G){(1===C.length||G)&&D.setStyle(F,p,G)}function l(){w(D,this),o=i.extend(o,this.toJSON()),e.undoManager.transact(function(){j(C,function(p){E(p,"scope",o.scope),E(p,"style",o.style),E(p,"class",o["class"]),r(p,"width",A(o.width)),r(p,"height",A(o.height)),o.type&&p.nodeName.toLowerCase()!==o.type&&(p=D.rename(p,o.type)),1===C.length&&(n(p),z(p)),o.align&&e.formatter.apply("align"+o.align,{},p),o.valign&&e.formatter.apply("valign"+o.valign,{},p)}),e.focus()})}var s,o,u,D=e.dom,C=[];if(C=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),s=e.dom.getParent(e.selection.getStart(),"td,th"),!C.length&&s&&C.push(s),s=s||C[0]){C.length>1?o={width:"",height:"",scope:"","class":"",align:"",style:"",type:s.nodeName.toLowerCase()}:(o={width:y(D.getStyle(s,"width")||D.getAttrib(s,"width")),height:y(D.getStyle(s,"height")||D.getAttrib(s,"height")),scope:D.getAttrib(s,"scope"),"class":D.getAttrib(s,"class")},o.type=s.nodeName.toLowerCase(),j("left center right".split(" "),function(p){e.formatter.matchNode(s,"align"+p)&&(o.align=p)}),j("top middle bottom".split(" "),function(p){e.formatter.matchNode(s,"valign"+p)&&(o.valign=p)}),v(D,o,s)),e.settings.table_cell_class_list&&(u={name:"class",type:"listbox",label:"Class",values:x(e.settings.table_cell_class_list,function(p){p.value&&(p.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[p.value]})})})});var B={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},u]};e.settings.table_cell_advtab!==!1?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:o,body:[{title:"General",type:"form",items:B},m(D)],onsubmit:l}):e.windowManager.open({title:"Cell properties",data:o,body:B,onsubmit:l})}},t.row=function(){function I(u,p,C){(1===l.length||C)&&E.setAttrib(u,p,C)}function s(u,p,C){(1===l.length||C)&&E.setStyle(u,p,C)}function H(){var J,p,C;w(E,this),G=i.extend(G,this.toJSON()),e.undoManager.transact(function(){var u=G.type;j(l,function(K){I(K,"scope",G.scope),I(K,"style",G.style),I(K,"class",G["class"]),s(K,"height",A(G.height)),u!==K.parentNode.nodeName.toLowerCase()&&(J=E.getParent(K,"table"),p=K.parentNode,C=E.select(u,J)[0],C||(C=E.create(u),J.firstChild?J.insertBefore(C,J.firstChild):J.appendChild(C)),C.appendChild(K),p.hasChildNodes()||E.remove(p)),1===l.length&&n(K),G.align&&e.formatter.apply("align"+G.align,{},K)}),e.focus()})}var o,B,r,D,G,F,E=e.dom,l=[];o=e.dom.getParent(e.selection.getStart(),"table"),B=e.dom.getParent(e.selection.getStart(),"td,th"),j(o.rows,function(p){j(p.cells,function(u){if(E.getAttrib(u,"data-mce-selected")||u==B){return l.push(p),!1}})}),r=l[0],r&&(l.length>1?G={height:"",scope:"","class":"",align:"",type:r.parentNode.nodeName.toLowerCase()}:(G={height:y(E.getStyle(r,"height")||E.getAttrib(r,"height")),scope:E.getAttrib(r,"scope"),"class":E.getAttrib(r,"class")},G.type=r.parentNode.nodeName.toLowerCase(),j("left center right".split(" "),function(p){e.formatter.matchNode(r,"align"+p)&&(G.align=p)}),v(E,G,r)),e.settings.table_row_class_list&&(D={name:"class",type:"listbox",label:"Class",values:x(e.settings.table_row_class_list,function(p){p.value&&(p.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[p.value]})})})}),F={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},D]},e.settings.table_row_advtab!==!1?e.windowManager.open({title:"Row properties",data:G,bodyType:"tabpanel",body:[{title:"General",type:"form",items:F},m(E)],onsubmit:H}):e.windowManager.open({title:"Row properties",data:G,body:F,onsubmit:H}))}}}),c("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(i,j){var h;return function(av){function ao(l,k){return{index:l,y:av.dom.getPos(k).y}}function aE(l,k){return{index:l,y:av.dom.getPos(k).y+k.offsetHeight}}function ak(l,k){return{index:l,x:av.dom.getPos(k).x}}function ar(l,k){return{index:l,x:av.dom.getPos(k).x+k.offsetWidth}}function aj(){var k=av.getBody().dir;return"rtl"===k}function aB(){return av.inline}function aA(){return aB?av.getBody().ownerDocument.body:av.getBody()}function az(l,k){return aj()?ar(l,k):ak(l,k)}function an(l,k){return aj()?ak(l,k):ar(l,k)}function aw(l,k){return ap(l,"width")/ap(k,"width")*100}function ap(m,k){var o=av.dom.getStyle(m,k,!0),l=parseInt(o,10);return l}function ay(l){var k=ap(l,"width"),m=ap(l.parentElement,"width");return k/m*100}function ai(l,k){var m=ap(l,"width");return k/m*100}function af(l,k){var m=ap(l.parentElement,"width");return k/m*100}function aD(q,m,u){for(var p=[],l=1;l<u.length;l++){var s=u[l].element;p.push(q(l-1,s))}var k=u[u.length-1];return p.push(m(u.length-1,k.element)),p}function a8(){var k=av.dom.select("."+bj,aA());i.each(k,function(l){av.dom.remove(l)})}function ag(k){a8(),a9(k)}function ah(v,x,p,k,u,m,w,y){var q={"data-mce-bogus":"all","class":bj+" "+v,unselectable:"on","data-mce-resize":!1,style:"cursor: "+x+"; margin: 0; padding: 0; position: absolute; left: "+p+"px; top: "+k+"px; height: "+u+"px; width: "+m+"px; "};return q[w]=y,q}function a5(k,m,l){i.each(k,function(v){var q=l.x,w=v.y-bm/2,p=bm,u=m;av.dom.add(aA(),"div",ah(ab,aT,q,w,p,u,bd,v.index))})}function aU(k,m,l){i.each(k,function(v){var q=v.x-bm/2,w=l.y,p=m,u=bm;av.dom.add(aA(),"div",ah(ac,bi,q,w,p,u,aN,v.index))})}function aF(k){return i.map(k.rows,function(l){var m=i.map(l.cells,function(p){var o=p.hasAttribute("rowspan")?parseInt(p.getAttribute("rowspan"),10):1,q=p.hasAttribute("colspan")?parseInt(p.getAttribute("colspan"),10):1;return{element:p,rowspan:o,colspan:q}});return{element:l,cells:m}})}function aO(p){function k(o,l){return o+","+l}function v(o,l){return z[k(o,l)]}function m(){var l=[];return i.each(q,function(o){l=l.concat(o.cells)}),l}function x(){return q}var z={},q=[],y=0,w=0;return i.each(p,function(u,l){var s=[];i.each(u.cells,function(D){for(var F=0;z[k(l,F)]!==b;){F++}for(var A={element:D.element,colspan:D.colspan,rowspan:D.rowspan,rowIndex:l,colIndex:F},o=0;o<D.colspan;o++){for(var E=0;E<D.rowspan;E++){var B=l+E,C=F+o;z[k(B,C)]=A,y=Math.max(y,B+1),w=Math.max(w,C+1)}}s.push(A)}),q.push({element:u.element,cells:s})}),{grid:{maxRows:y,maxCols:w},getAt:v,getAllCells:m,getAllRows:x}}function at(m,k){for(var o=[],l=m;l<k;l++){o.push(l)}return o}function aM(p,l,s){for(var m,k=p(),q=0;q<k.length;q++){l(k[q])&&(m=k[q])}return m?m:s()}function aP(k){var m=at(0,k.grid.maxCols),l=at(0,k.grid.maxRows);return i.map(m,function(q){function u(){for(var x=[],v=0;v<l.length;v++){var w=k.getAt(v,q);w&&w.colIndex===q&&x.push(w)}return x}function p(o){return 1===o.colspan}function s(){for(var v,o=0;o<l.length;o++){if(v=k.getAt(o,q)){return v}}return null}return aM(u,p,s)})}function ba(k){var m=at(0,k.grid.maxCols),l=at(0,k.grid.maxRows);return i.map(l,function(s){function q(){for(var w=[],v=0;v<m.length;v++){var x=k.getAt(s,v);x&&x.rowIndex===s&&w.push(x)}return w}function p(o){return 1===o.rowspan}function u(){return k.getAt(s,0)}return aM(q,p,u)})}function a9(v){var o=aF(v),x=aO(o),q=ba(x),p=aP(x),k=av.dom.getPos(v),m=q.length>0?aD(ao,aE,q):[],w=p.length>0?aD(az,an,p):[];a5(m,v.offsetWidth,k),aU(w,v.offsetHeight,k)}function a6(w,B,p,k){if(B<0||B>=w.length-1){return""}var v=w[B];if(v){v={value:v,delta:0}}else{for(var m=w.slice(0,B).reverse(),z=0;z<m.length;z++){m[z]&&(v={value:m[z],delta:z+1})}}var C=w[B+1];if(C){C={value:C,delta:1}}else{for(var q=w.slice(B+1),A=0;A<q.length;A++){q[A]&&(C={value:q[A],delta:A+1})}}var y=C.delta-v.delta,x=Math.abs(C.value-v.value)/y;return p?x/ap(k,"width")*100:x}function aX(l,k){var m=av.dom.getStyle(l,k);return m||(m=av.dom.getAttrib(l,k)),m||(m=av.dom.getStyle(l,k,!0)),m}function aV(p,l,s){var m=aX(p,"width"),k=parseInt(m,10),q=l?aw(p,s):ap(p,"width");return(l&&!aK(m)||!l&&!bh(m))&&(k=0),!isNaN(k)&&k>0?k:q}function aR(y,p,k){for(var v=aP(y),m=i.map(v,function(l){return az(l.colIndex,l.element).x}),w=[],z=0;z<v.length;z++){var q=v[z].element.hasAttribute("colspan")?parseInt(v[z].element.getAttribute("colspan"),10):1,x=q>1?a6(m,z):aV(v[z].element,p,k);x=x?x:r,w.push(x)}return w}function aS(l){var k=aX(l,"height"),m=parseInt(k,10);return aK(k)&&(m=0),!isNaN(m)&&m>0?m:ap(l,"height")}function a2(p){for(var v=ba(p),u=i.map(v,function(l){return ao(l.rowIndex,l.element).y}),o=[],m=0;m<v.length;m++){var q=v[m].element.hasAttribute("rowspan")?parseInt(v[m].element.getAttribute("rowspan"),10):1,k=q>1?a6(u,m):aS(v[m].element);k=k?k:aa,o.push(k)}return o}function a0(A,p,k,v,m){function y(l){return i.map(l,function(){return 0})}function B(){var o;if(m){o=[100-w[0]]}else{var l=Math.max(v,w[0]+k);o=[l-w[0]]}return o}function q(G,E){var J,H=y(w.slice(0,G)),F=y(w.slice(E+1));if(k>=0){var C=Math.max(v,w[E]-k);J=H.concat([k,C-w[E]]).concat(F)}else{var D=Math.max(v,w[G]+k),I=w[G]-D;J=H.concat([D-w[G],I]).concat(F)}return J}function z(C,l){var E,D=y(w.slice(0,l));if(k>=0){E=D.concat([k])}else{var u=Math.max(v,w[l]+k);E=D.concat([u-w[l]])}return E}var x,w=A.slice(0);return x=0===A.length?[]:1===A.length?B():0===p?q(0,1):p>0&&p<A.length-1?q(p,p+1):p===A.length-1?z(p-1,p):[]}function a4(o,l,p){for(var m=0,k=o;k<l;k++){m+=p[k]}return m}function ad(k,m){var l=k.getAllCells();return i.map(l,function(p){var o=a4(p.colIndex,p.colIndex+p.colspan,m);return{element:p.element,width:o,colspan:p.colspan}})}function aL(k,m){var l=k.getAllCells();return i.map(l,function(p){var o=a4(p.rowIndex,p.rowIndex+p.rowspan,m);return{element:p.element,height:o,rowspan:p.rowspan}})}function aJ(k,m){var l=k.getAllRows();return i.map(l,function(p,o){return{element:p.element,height:m[o]}})}function aK(k){return e.test(k)}function bh(k){return bn.test(k)}function am(y,G,B){function F(l,o){i.each(l,function(p){av.dom.setStyle(p.element,"width",p.width+o),av.dom.setAttrib(p.element,"width",null)})}function N(){return B<L.grid.maxCols-1?ay(y):ay(y)+af(y,G)}function z(){return B<L.grid.maxCols-1?ap(y,"width"):ap(y,"width")+G}function H(l,s,p){B!=L.grid.maxCols-1&&p||(av.dom.setStyle(y,"width",l+s),av.dom.setAttrib(y,"width",null))}for(var q=aF(y),L=aO(q),K=aK(y.width)||aK(y.style.width),J=aR(L,K,y),D=K?ai(y,G):G,I=a0(J,B,D,r,K,y),M=[],A=0;A<I.length;A++){M.push(I[A]+J[A])}var k=ad(L,M),m=K?"%":"px",v=K?N():z();av.undoManager.transact(function(){F(k,m),H(v,m,K)})}function au(A,p,k){for(var m=aF(A),y=aO(m),B=a2(y),q=[],z=0,x=0;x<B.length;x++){q.push(x===k?p+B[x]:B[x]),z+=z[x]}var w=aL(y,q),v=aJ(y,q);av.undoManager.transact(function(){i.each(v,function(l){av.dom.setStyle(l.element,"height",l.height+"px"),av.dom.setAttrib(l.element,"height",null)}),i.each(w,function(l){av.dom.setStyle(l.element,"height",l.height+"px"),av.dom.setAttrib(l.element,"height",null)}),av.dom.setStyle(A,"height",z+"px"),av.dom.setAttrib(A,"height",null)})}function aH(){bb=setTimeout(function(){aZ()},200)}function aI(){clearTimeout(bb)}function aY(){var k=document.createElement("div");return k.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),k.setAttribute("data-mce-bogus","all"),k}function a3(l,k){av.dom.bind(l,"mouseup",function(){aZ()}),av.dom.bind(l,"mousemove",function(m){aI(),bf&&k(m)}),av.dom.bind(l,"mouseout",function(){aH()})}function aZ(){if(av.dom.remove(bk),bf){av.dom.removeClass(aC,bg),bf=!1;var p,l;if(aG(aC)){var u=parseInt(av.dom.getAttrib(aC,aW),10),q=av.dom.getPos(aC).x;p=parseInt(av.dom.getAttrib(aC,aN),10),l=aj()?u-q:q-u,Math.abs(l)>=1&&am(h,l,p)}else{if(n(aC)){var k=parseInt(av.dom.getAttrib(aC,bc),10),m=av.dom.getPos(aC).y;p=parseInt(av.dom.getAttrib(aC,bd),10),l=m-k,Math.abs(l)>=1&&au(h,l,p)}}ag(h),av.nodeChanged()}}function aQ(l,k){bk=bk?bk:aY(),bf=!0,av.dom.addClass(l,bg),aC=l,a3(bk,k),av.dom.add(aA(),bk)}function aG(k){return av.dom.hasClass(k,ac)}function n(k){return av.dom.hasClass(k,ab)}function a7(l){al=al!==b?al:l.clientX;var m=l.clientX-al;al=l.clientX;var k=av.dom.getPos(aC).x;av.dom.setStyle(aC,"left",k+m+"px")}function a1(l){t=t!==b?t:l.clientY;var m=l.clientY-t;t=l.clientY;var k=av.dom.getPos(aC).y;av.dom.setStyle(aC,"top",k+m+"px")}function bl(k){al=b,aQ(k,a7)}function aq(k){t=b,aQ(k,a1)}function ax(m){var l=m.target,q=av.getBody();if(av.$.contains(q,h)||h===q){if(aG(l)){m.preventDefault();var p=av.dom.getPos(l).x;av.dom.setAttrib(l,aW,p),bl(l)}else{if(n(l)){m.preventDefault();var k=av.dom.getPos(l).y;av.dom.setAttrib(l,bc,k),aq(l)}else{a8()}}}}var bb,bf,bk,aC,al,t,bj="mce-resize-bar",ab="mce-resize-bar-row",aT="row-resize",bd="data-row",bc="data-initial-top",ac="mce-resize-bar-col",bi="col-resize",aN="data-col",aW="data-initial-left",bm=4,r=10,aa=10,bg="mce-resize-bar-dragging",e=new RegExp(/(\d+(\.\d+)?%)/),bn=new RegExp(/px|em/);return av.on("init",function(){av.dom.bind(aA(),"mousedown",ax)}),av.on("ObjectResized",function(k){var m=k.target;if("TABLE"===m.nodeName){var l=[];i.each(m.rows,function(o){i.each(o.cells,function(q){var p=av.dom.getStyle(q,"width",!0);l.push({cell:q,width:p})})}),i.each(l,function(o){av.dom.setStyle(o.cell,"width",o.width),av.dom.setAttrib(o.cell,"width",null)})}}),av.on("mouseover",function(l){if(!bf){var k=av.dom.getParent(l.target,"table");("TABLE"===l.target.nodeName||k)&&(h=k,ag(k))}}),av.on("keydown",function(k){switch(k.keyCode){case j.LEFT:case j.RIGHT:case j.UP:case j.DOWN:a8()}}),av.on("remove",function(){a8(),av.dom.unbind(aA(),"mousedown",ax)}),{adjustWidth:am,adjustHeight:au,clearBars:a8,drawBars:a9,determineDeltas:a0,getTableGrid:aO,getTableDetails:aF,getWidths:aR,getPixelHeights:a2,isPercentageBasedSize:aK,isPixelBasedSize:bh,recalculateWidths:ad,recalculateCellHeights:aL,recalculateRowHeights:aJ}}}),c("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(q,y,k,h,p,j,w,z,m){function x(F){function O(l){return function(){F.execCommand(l)}}function H(E,u){var N,C,o,l;for(o='<table id="__mce"><tbody>',N=0;N<u;N++){for(o+="<tr>",C=0;C<E;C++){o+="<td>"+(z.ie&&z.ie<10?"&nbsp;":"<br>")+"</td>"}o+="</tr>"}return o+="</tbody></table>",F.undoManager.transact(function(){F.insertContent(o),l=F.dom.get("__mce"),F.dom.setAttrib(l,"id",null),F.$("tr",l).each(function(R,Q){F.fire("newrow",{node:Q}),F.$("th,td",Q).each(function(T,S){F.fire("newcell",{node:S})})}),F.dom.setAttribs(l,F.settings.table_default_attributes||{}),F.dom.setStyles(l,F.settings.table_default_styles||{})}),l}function t(u,l,C){function o(){var S,Q,N,R={},E=0;Q=F.dom.select("td[data-mce-selected],th[data-mce-selected]"),S=Q[0],S||(S=F.selection.getStart()),C&&Q.length>0?(v(Q,function(T){return R[T.parentNode.parentNode.nodeName]=1}),v(R,function(T){E+=T}),N=1!==E):N=!F.dom.getParent(S,l),u.disabled(N),F.selection.selectorChanged(l,function(T){u.disabled(!T)})}F.initialized?o():F.on("init",o)}function L(){t(this,"table")}function K(){t(this,"td,th")}function D(){t(this,"td,th",!0)}function I(){var o="";o='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var l=0;l<10;l++){o+="<tr>";for(var u=0;u<10;u++){o+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*l+u)+'" href="#" data-mce-x="'+u+'" data-mce-y="'+l+'"></a></td>'}o+="</tr>"}return o+="</table>",o+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function G(Q,U,C){var o,N,S,V,E,T=C.getEl().getElementsByTagName("table")[0],R=C.isRtl()||"tl-tr"==C.parent().rel;for(T.nextSibling.innerHTML=Q+1+" x "+(U+1),R&&(Q=9-Q),N=0;N<10;N++){for(o=0;o<10;o++){V=T.rows[N].childNodes[o].firstChild,E=(R?o>=Q:o<=Q)&&N<=U,F.dom.toggleClass(V,"mce-active",E),E&&(S=V)}}return S.parentNode}function J(){F.addButton("tableprops",{title:"Table properties",onclick:e.tableProps,icon:"table"}),F.addButton("tabledelete",{title:"Delete table",onclick:O("mceTableDelete")}),F.addButton("tablecellprops",{title:"Cell properties",onclick:O("mceTableCellProps")}),F.addButton("tablemergecells",{title:"Merge cells",onclick:O("mceTableMergeCells")}),F.addButton("tablesplitcells",{title:"Split cell",onclick:O("mceTableSplitCells")}),F.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:O("mceTableInsertRowBefore")}),F.addButton("tableinsertrowafter",{title:"Insert row after",onclick:O("mceTableInsertRowAfter")}),F.addButton("tabledeleterow",{title:"Delete row",onclick:O("mceTableDeleteRow")}),F.addButton("tablerowprops",{title:"Row properties",onclick:O("mceTableRowProps")}),F.addButton("tablecutrow",{title:"Cut row",onclick:O("mceTableCutRow")}),F.addButton("tablecopyrow",{title:"Copy row",onclick:O("mceTableCopyRow")}),F.addButton("tablepasterowbefore",{title:"Paste row before",onclick:O("mceTablePasteRowBefore")}),F.addButton("tablepasterowafter",{title:"Paste row after",onclick:O("mceTablePasteRowAfter")}),F.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:O("mceTableInsertColBefore")}),F.addButton("tableinsertcolafter",{title:"Insert column after",onclick:O("mceTableInsertColAfter")}),F.addButton("tabledeletecol",{title:"Delete column",onclick:O("mceTableDeleteCol")})}function s(o){var l=F.dom.is(o,"table")&&F.getBody().contains(o);return l}function i(){var l=F.settings.table_toolbar;""!==l&&l!==!1&&(l||(l="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),F.addContextToolbar(s,l))}function M(){return n}function B(l){n=l}var n,r,A=this,e=new h(F);!F.settings.object_resizing||F.settings.table_resize_bars===!1||F.settings.object_resizing!==!0&&"table"!==F.settings.object_resizing||(r=p(F)),F.settings.table_grid===!1?F.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:e.table}):F.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(l){l.aria&&(this.parent().hideAll(),l.stopImmediatePropagation(),e.table())},onshow:function(){G(0,0,this.menu.items()[0])},onhide:function(){var l=this.menu.items()[0].getEl().getElementsByTagName("a");F.dom.removeClass(l,"mce-active"),F.dom.addClass(l[0],"mce-active")},menu:[{type:"container",html:I(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(u){var l,C,o=u.target;"A"==o.tagName.toUpperCase()&&(l=parseInt(o.getAttribute("data-mce-x"),10),C=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(l=9-l),l===this.lastX&&C===this.lastY||(G(l,C,u.control),this.lastX=l,this.lastY=C))},onclick:function(o){var l=this;"A"==o.target.tagName.toUpperCase()&&(o.preventDefault(),o.stopPropagation(),l.parent().cancel(),F.undoManager.transact(function(){H(l.lastX+1,l.lastY+1)}),F.addVisual())}}]}),F.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:L,onclick:e.tableProps}),F.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:L,cmd:"mceTableDelete"}),F.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:O("mceTableCellProps"),onPostRender:K},{text:"Merge cells",onclick:O("mceTableMergeCells"),onPostRender:D},{text:"Split cell",onclick:O("mceTableSplitCells"),onPostRender:K}]}),F.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:O("mceTableInsertRowBefore"),onPostRender:K},{text:"Insert row after",onclick:O("mceTableInsertRowAfter"),onPostRender:K},{text:"Delete row",onclick:O("mceTableDeleteRow"),onPostRender:K},{text:"Row properties",onclick:O("mceTableRowProps"),onPostRender:K},{text:"-"},{text:"Cut row",onclick:O("mceTableCutRow"),onPostRender:K},{text:"Copy row",onclick:O("mceTableCopyRow"),onPostRender:K},{text:"Paste row before",onclick:O("mceTablePasteRowBefore"),onPostRender:K},{text:"Paste row after",onclick:O("mceTablePasteRowAfter"),onPostRender:K}]}),F.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:O("mceTableInsertColBefore"),onPostRender:K},{text:"Insert column after",onclick:O("mceTableInsertColAfter"),onPostRender:K},{text:"Delete column",onclick:O("mceTableDeleteCol"),onPostRender:K}]});var P=[];v("inserttable tableprops deletetable | cell row column".split(" "),function(l){"|"==l?P.push({text:"-"}):P.push(F.menuItems[l])}),F.addButton("table",{type:"menubutton",title:"Table",menu:P}),z.isIE||F.on("click",function(l){l=l.target,"TABLE"===l.nodeName&&(F.selection.select(l),F.nodeChanged())}),A.quirks=new y(F),F.on("Init",function(){A.cellSelection=new k(F,function(l){l&&r&&r.clearBars()}),A.resizeBars=r}),F.on("PreInit",function(){F.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(o,l){for(var u=o.length;u--;){o[u].attr(l,null)}})}),v({mceTableSplitCells:function(l){l.split()},mceTableMergeCells:function(o){var l;l=F.dom.getParent(F.selection.getStart(),"th,td"),F.dom.select("td[data-mce-selected],th[data-mce-selected]").length?o.merge():e.merge(o,l)},mceTableInsertRowBefore:function(l){l.insertRows(!0)},mceTableInsertRowAfter:function(l){l.insertRows()},mceTableInsertColBefore:function(l){l.insertCols(!0)},mceTableInsertColAfter:function(l){l.insertCols()},mceTableDeleteCol:function(l){l.deleteCols()},mceTableDeleteRow:function(l){l.deleteRows()},mceTableCutRow:function(l){n=l.cutRows()},mceTableCopyRow:function(l){n=l.copyRows()},mceTablePasteRowBefore:function(l){l.pasteRows(n,!0)},mceTablePasteRowAfter:function(l){l.pasteRows(n)},mceSplitColsBefore:function(l){l.splitCols(!0)},mceSplitColsAfter:function(l){l.splitCols(!1)},mceTableDelete:function(l){r&&r.clearBars(),l.deleteTable()}},function(l,o){F.addCommand(o,function(){var u=new q(F);u&&(l(u),F.execCommand("mceRepaint"),A.cellSelection.clear())})}),v({mceInsertTable:e.table,mceTableProps:function(){e.table(!0)},mceTableRowProps:e.row,mceTableCellProps:e.cell},function(o,l){F.addCommand(l,function(u,C){o(C)})}),J(),i(),F.settings.table_tab_navigation!==!1&&F.on("keydown",function(o){var C,u,l;9==o.keyCode&&(C=F.dom.getParent(F.selection.getStart(),"th,td"),C&&(o.preventDefault(),u=new q(F),l=o.shiftKey?-1:1,F.undoManager.transact(function(){!u.moveRelIdx(C,l)&&l>0&&(u.insertRow(),u.refresh(),u.moveRelIdx(C,l))})))}),A.insertTable=H,A.setClipboardRows=B,A.getClipboardRows=M}var v=j.each;m.add("table",x)})}(window);