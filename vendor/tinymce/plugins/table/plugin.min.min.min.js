!function(k,e){function i(b,d){for(var a,c=[],f=0;f<b.length;++f){if(a=j[b[f]]||h(b[f]),!a){throw"module definition dependecy not found: "+b[f]}c.push(a)}d.apply(null,c)}function l(a,b,c){if("string"!=typeof a){throw"invalid module definition, module id must be defined and be a string"}if(b===e){throw"invalid module definition, dependencies must be specified"}if(c===e){throw"invalid module definition, definition function must be specified"}i(b,function(){j[a]=c.apply(null,arguments)})}function h(c){for(var a=k,b=c.split(/[.\/]/),d=0;d<b.length;++d){if(!a[b[d]]){return}a=a[b[d]]}return a}var j={};l("tinymce/tableplugin/Utils",["tinymce/Env"],function(b){function d(f){(!b.ie||b.ie>9)&&(f.hasChildNodes()||(f.innerHTML='<br data-mce-bogus="1" />'))}var a=function(f){return function(n,g){n&&(g=parseInt(g,10),1===g||0===g?n.removeAttribute(f,1):n.setAttribute(f,g,1))}},c=function(f){return function(g){return parseInt(g.getAttribute(f)||1,10)}};return{setColSpan:a("colSpan"),setRowSpan:a("rowspan"),getColSpan:c("colSpan"),getRowSpan:c("rowSpan"),setSpanVal:function(o,g,f){a(g)(o,f)},getSpanVal:function(f,g){return c(g)(f)},paddCell:d}}),l("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(a,o){var f=function(m,p,q){return m[q]?m[q][p]:null},n=function(p,v,q){var m=f(p,v,q);return m?m.elm:null},b=function(q,w,x,m){var p,v,z=0,y=n(q,w,x);for(p=x;(m>0?p<q.length:p>=0)&&(v=f(q,w,p),y===v.elm);p+=m){z++}return z},g=function(x,q,v){for(var p,m=x[v],w=q;w<m.length;w++){if(p=m[w],p.real){return p.elm}}return null},s=function(p,w){for(var v,x=[],q=p[w],m=0;m<q.length;m++){v=q[m],x.push({elm:v.elm,above:b(p,m,w,-1)-1,below:b(p,m,w,1)-1}),m+=o.getColSpan(v.elm)-1}return x},c=function(q,p){var v=q.elm.ownerDocument,m=v.createElement("td");return o.setColSpan(m,o.getColSpan(q.elm)),o.setRowSpan(m,p),o.paddCell(m),m},d=function(p,v,w,q){var m=g(p,w+1,q);m?m.parentNode.insertBefore(v,m):(m=g(p,0,q),m.parentNode.appendChild(v))},r=function(q,w,v,m){if(0!==w.above){o.setRowSpan(w.elm,w.above);var p=c(w,w.below+1);return d(q,p,v,m),p}return null},t=function(q,w,v,m){if(0!==w.below){o.setRowSpan(w.elm,w.above+1);var p=c(w,w.below);return d(q,p,v,m+1),p}return null},u=function(m,q,p,w){var y=s(m,p),v=n(m,q,p).parentNode,x=[];return a.each(y,function(z,B){var A=w?r(m,z,B,p):t(m,z,B,p);null!==A&&x.push(x)}),{cells:x,row:v}};return{splitAt:u}}),l("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(a,g,b,d){var n=a.each,f=b.getSpanVal,c=b.setSpanVal;return function(aa,ae,T){function U(){aa.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function V(o){return o===aa.getBody()}function ac(r,o){return r?(o=a.map(o.split(","),function(s){return s.toLowerCase()}),a.grep(r.childNodes,function(s){return a.inArray(o,s.nodeName.toLowerCase())!==-1})):[]}function X(){var o=0;L=[],an=0,n(["thead","tbody","tfoot"],function(t){var r=ac(ae,t)[0],s=ac(r,"tr");n(s,function(ap,aq){aq+=o,n(ac(ap,"td,th"),function(av,at){var ax,au,aw,ar;if(L[aq]){for(;L[aq][at];){at++}}for(aw=f(av,"rowspan"),ar=f(av,"colspan"),au=aq;au<aq+aw;au++){for(L[au]||(L[au]=[]),ax=at;ax<at+ar;ax++){L[au][ax]={part:t,real:au==aq&&ax==at,elm:av,rowspan:aw,colspan:ar}}}an=Math.max(an,at+1)})}),o+=s.length})}function ab(o){return aa.fire("newrow",{node:o}),o}function W(o){return aa.fire("newcell",{node:o}),o}function af(o,r){return o=o.cloneNode(r),o.removeAttribute("id"),o}function p(r,s){var o;if(o=L[s]){return o[r]}}function S(o,r){return o[r]?o[r]:null}function x(r,t){for(var o=[],s=0;s<r.length;s++){o.push(p(t,s))}return o}function ah(o){return o&&(!!m.getAttrib(o.elm,"data-mce-selected")||o==T)}function ag(){var o=[];return n(ae.rows,function(r){n(r.cells,function(s){if(m.getAttrib(s,"data-mce-selected")||T&&s==T.elm){return o.push(r),!1}})}),o}function z(){var o=0;return n(L,function(r){if(n(r,function(s){ah(s)&&o++}),o){return !1}}),o}function I(){var o=m.createRng();V(ae)||(o.setStartAfter(ae),o.setEndAfter(ae),ao.setRng(o),m.remove(ae))}function Q(o){var r,s={};return aa.settings.table_clone_elements!==!1&&(s=a.makeMap((aa.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),a.walk(o,function(ap){var t;if(3==ap.nodeType){return n(m.getParents(ap.parentNode,null,o).reverse(),function(aq){s[aq.nodeName]&&(aq=af(aq,!1),r?t&&t.appendChild(aq):r=t=aq,t=aq)}),t&&(t.innerHTML=g.ie&&g.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1}},"childNodes"),o=af(o,!1),W(o),c(o,"rowSpan",1),c(o,"colSpan",1),r?o.appendChild(r):b.paddCell(o),o}function N(){var o,r=m.createRng();return n(m.select("tr",ae),function(s){0===s.cells.length&&m.remove(s)}),0===m.select("tr",ae).length?(r.setStartBefore(ae),r.setEndBefore(ae),ao.setRng(r),void m.remove(ae)):(n(m.select("thead,tbody,tfoot",ae),function(s){0===s.rows.length&&m.remove(s)}),X(),void (R&&(o=L[Math.min(L.length-1,R.y)],o&&(ao.select(o[Math.min(o.length-1,R.x)].elm,!0),ao.collapse(!0)))))}function Z(t,r,ar,au){var ap,at,s,o,aq;for(ap=L[r][t].elm.parentNode,s=1;s<=ar;s++){if(ap=m.getNext(ap,"tr")){for(at=t;at>=0;at--){if(aq=L[r+s][at].elm,aq.parentNode==ap){for(o=1;o<=au;o++){m.insertAfter(Q(aq),aq)}break}}if(at==-1){for(o=1;o<=au;o++){ap.insertBefore(Q(ap.cells[0]),ap.cells[0])}}}}}function O(){n(L,function(o,r){n(o,function(ar,t){var s,ap,aq;if(ah(ar)&&(ar=ar.elm,s=f(ar,"colspan"),ap=f(ar,"rowspan"),s>1||ap>1)){for(c(ar,"rowSpan",1),c(ar,"colSpan",1),aq=0;aq<s-1;aq++){m.insertAfter(Q(ar),ar)}Z(t,r,ap-1,s)}})})}function M(o,s,ap){for(var r=[],t=0;t<o.length;t++){(t<s||t>ap)&&r.push(o[t])}return r}function v(o){return a.grep(o,function(r){return r.real===!1})}function w(r){for(var t=[],o=0;o<r.length;o++){var s=r[o].elm;t[t.length-1]!==s&&t.push(s)}return t}function y(r,at,aq,au,t){var o=0;if(t-aq<1){return 0}for(var ar=aq+1;ar<=t;ar++){var s=M(S(r,ar),at,au),ap=v(s);s.length===ap.length&&(a.each(w(ap),function(av){b.setRowSpan(av,b.getRowSpan(av)-1)}),o++)}return o}function G(r,at,aq,au,t){var o=0;if(au-at<1){return 0}for(var ar=at+1;ar<=au;ar++){var s=M(x(r,ar),aq,t),ap=v(s);s.length===ap.length&&(a.each(w(ap),function(av){b.setColSpan(av,b.getColSpan(av)-1)}),o++)}return o}function H(aC,ay,aA){var ar,o,au,at,s,t,ap,az,aw,aq,av,r,aB;if(aC?(ar=Y(aC),o=ar.x,au=ar.y,at=o+(ay-1),s=au+(aA-1)):(R=ak=null,n(L,function(aE,aF){n(aE,function(aG,aH){ah(aG)&&(R||(R={x:aH,y:aF}),ak={x:aH,y:aF})})}),R&&(o=R.x,au=R.y,at=ak.x,s=ak.y)),az=p(o,au),aw=p(at,s),az&&aw&&az.part==aw.part){O(),X(),r=y(L,o,au,at,s),aB=G(L,o,au,at,s),az=p(o,au).elm;var ax=at-o-aB+1,aD=s-au-r+1;for(ax===an&&aD===L.length&&(ax=1,aD=1),ax===an&&aD>1&&(aD=1),c(az,"colSpan",ax),c(az,"rowSpan",aD),ap=au;ap<=s;ap++){for(t=o;t<=at;t++){L[ap]&&L[ap][t]&&(aC=L[ap][t].elm,aC!=az&&(aq=a.grep(aC.childNodes),n(aq,function(aE){az.appendChild(aE)}),aq.length&&(aq=a.grep(az.childNodes),av=0,n(aq,function(aE){"BR"==aE.nodeName&&av++<aq.length-1&&az.removeChild(aE)})),m.remove(aC)))}}N()}}function K(r){var ar,au,ap,aq,av,aw,o,s,at,t;if(n(L,function(ay,ax){if(n(ay,function(az){if(ah(az)&&(az=az.elm,av=az.parentNode,aw=ab(af(av,!1)),ar=ax,r)){return !1}}),r){return ar===e}}),ar!==e){for(aq=0,t=0;aq<L[0].length;aq+=t){if(L[ar][aq]&&(au=L[ar][aq].elm,t=f(au,"colspan"),au!=ap)){if(r){if(ar>0&&L[ar-1][aq]&&(s=L[ar-1][aq].elm,at=f(s,"rowSpan"),at>1)){c(s,"rowSpan",at+1);continue}}else{if(at=f(au,"rowspan"),at>1){c(au,"rowSpan",at+1);continue}}o=Q(au),c(o,"colSpan",au.colSpan),aw.appendChild(o),ap=au}}aw.hasChildNodes()&&(r?av.parentNode.insertBefore(aw,av):m.insertAfter(aw,av))}}function J(r,s){s=s||ag().length||1;for(var o=0;o<s;o++){K(r)}}function C(r){var o,s;n(L,function(t){if(n(t,function(aq,ap){if(ah(aq)&&(o=ap,r)){return !1}}),r){return o===e}}),n(L,function(ap,aq){var at,t,ar;ap[o]&&(at=ap[o].elm,at!=s&&(ar=f(at,"colspan"),t=f(at,"rowspan"),1==ar?r?(at.parentNode.insertBefore(Q(at),at),Z(o,aq,t-1,ar)):(m.insertAfter(Q(at),at),Z(o,aq,t-1,ar)):c(at,"colSpan",at.colSpan+1),s=at))})}function D(r,s){s=s||z()||1;for(var o=0;o<s;o++){C(r)}}function A(o){return a.grep(q(o),ah)}function q(o){var r=[];return n(o,function(s){n(s,function(t){r.push(t)})}),r}function P(){var o=[];if(V(ae)){if(1==L[0].length){return}if(A(L).length==q(L).length){return}}n(L,function(r){n(r,function(s,t){ah(s)&&a.inArray(o,t)===-1&&(n(L,function(aq){var ar,ap=aq[t].elm;ar=f(ap,"colSpan"),ar>1?c(ap,"colSpan",ar-1):m.remove(ap)}),o.push(t))})}),N()}function aj(){function o(s){var t,ap;n(s.cells,function(ar){var aq=f(ar,"rowSpan");aq>1&&(c(ar,"rowSpan",aq-1),t=Y(ar),Z(t.x,t.y,1,1))}),t=Y(s.cells[0]),n(L[t.y],function(aq){var ar;aq=aq.elm,aq!=ap&&(ar=f(aq,"rowSpan"),ar<=1?m.remove(aq):c(aq,"rowSpan",ar-1),ap=aq)})}var r;r=ag(),V(ae)&&r.length==ae.rows.length||(n(r.reverse(),function(s){o(s)}),N())}function ai(){var o=ag();if(!V(ae)||o.length!=ae.rows.length){return m.remove(o),N(),o}}function u(){var o=ag();return n(o,function(s,r){o[r]=af(s,!0)}),o}function ad(r,ap){var o,s,t;r&&(o=d.splitAt(L,R.x,R.y,ap),s=o.row,a.each(o.cells,W),t=a.map(r,function(aq){return aq.cloneNode(!0)}),ap||t.reverse(),n(t,function(at){var aq,au,ar=at.cells.length;for(ab(at),aq=0;aq<ar;aq++){au=at.cells[aq],W(au),c(au,"colSpan",1),c(au,"rowSpan",1)}for(aq=ar;aq<an;aq++){at.appendChild(W(Q(at.cells[ar-1])))}for(aq=an;aq<ar;aq++){m.remove(at.cells[aq])}ap?s.parentNode.insertBefore(at,s):m.insertAfter(at,s)}),U())}function Y(o){var r;return n(L,function(s,t){return n(s,function(ap,aq){if(ap.elm==o){return r={x:aq,y:t},!1}}),!r}),r}function am(o){R=Y(o)}function al(){var o,r;return o=r=0,n(L,function(s,t){n(s,function(at,aq){var ap,ar;ah(at)&&(at=L[t][aq],aq>o&&(o=aq),t>r&&(r=t),at.real&&(ap=at.colspan-1,ar=at.rowspan-1,ap&&aq+ap>o&&(o=aq+ap),ar&&t+ar>r&&(r=t+ar)))})}),{x:o,y:r}}function F(t){var aw,ar,au,ap,at,r,av,aq,o,s;if(ak=Y(t),R&&ak){for(aw=Math.min(R.x,ak.x),ar=Math.min(R.y,ak.y),au=Math.max(R.x,ak.x),ap=Math.max(R.y,ak.y),at=au,r=ap,s=ar;s<=ap;s++){for(o=aw;o<=au;o++){t=L[s][o],t.real&&(av=t.colspan-1,aq=t.rowspan-1,av&&o+av>at&&(at=o+av),aq&&s+aq>r&&(r=s+aq))}}for(U(),s=ar;s<=r;s++){for(o=aw;o<=at;o++){L[s][o]&&m.setAttrib(L[s][o].elm,"data-mce-selected","1")}}}}function B(o,s){var ap,r,t;ap=Y(o),r=ap.y*an+ap.x;do{if(r+=s,t=p(r%an,Math.floor(r/an)),!t){break}if(t.elm!=o){return ao.select(t.elm,!0),m.isEmpty(t.elm)&&ao.collapse(!0),!0}}while(t.elm==o);return !1}function E(r){if(R){var o=d.splitAt(L,R.x,R.y,r);a.each(o.cells,W)}}var L,an,R,ak,ao=aa.selection,m=ao.dom;ae=ae||m.getParent(ao.getStart(!0),"table"),X(),T=T||m.getParent(ao.getStart(!0),"th,td"),T&&(R=Y(T),ak=al(),T=p(R.x,R.y)),a.extend(this,{deleteTable:I,split:O,merge:H,insertRow:K,insertRows:J,insertCol:C,insertCols:D,splitCols:E,deleteCols:P,deleteRows:aj,cutRows:ai,copyRows:u,pasteRows:ad,getPos:Y,setStartCell:am,setEndCell:F,moveRelIdx:B,refresh:X})}}),l("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(a,c,g,b,d){var n=b.each,f=d.getSpanVal;return function(x){function u(){function o(t){function X(E,A){var I=E?"previousSibling":"nextSibling",G=x.dom.getParent(A,"tr"),B=G[I];if(B){return C(x,A,B,E),t.preventDefault(),!0}var z=x.dom.getParent(G,"table"),D=G.parentNode,F=D.nodeName.toLowerCase();if("tbody"===F||F===(E?"tfoot":"thead")){var H=aa(E,z,D,"tbody");if(null!==H){return y(E,H,A)}}return U(E,G,I,z)}function aa(E,G,B,F){var z=x.dom.select(">"+F,G),D=z.indexOf(B);if(E&&0===D||!E&&D===z.length-1){return ab(E,G)}if(D===-1){var A="thead"===B.tagName.toLowerCase()?0:z.length-1;return z[A]}return z[D+(E?-1:1)]}function ab(D,A){var B=D?"thead":"tfoot",z=x.dom.select(">"+B,A);return 0!==z.length?z[0]:null}function y(B,z,D){var A=V(z,B);return A&&C(x,D,A,B),t.preventDefault(),!0}function U(B,D,E,A){var G=A[E];if(G){return W(G),!0}var z=x.dom.getParent(A,"td,th");if(z){return X(B,z,t)}var F=V(D,!B);return W(F),t.preventDefault(),!1}function V(z,A){var B=z&&z[A?"lastChild":"firstChild"];return B&&"BR"===B.nodeName?x.dom.getParent(B,"td,th"):B}function W(z){x.selection.setCursorLocation(z,0)}function v(){return S==a.UP||S==a.DOWN}function Z(z){var A=z.selection.getNode(),B=z.dom.getParent(A,"tr");return null!==B}function r(z){for(var A=0,B=z;B.previousSibling;){B=B.previousSibling,A+=f(B,"colspan")}return A}function Y(D,A){var B=0,z=0;return n(D.children,function(E,F){if(B+=f(E,"colspan"),z=F,B>A){return !1}}),z}function C(E,G,B,F){var H=r(x.dom.getParent(G,"td,th")),D=Y(B,H),z=B.childNodes[D],A=V(z,F);W(A||z)}function R(D){var A=x.selection.getNode(),B=x.dom.getParent(A,"td,th"),z=x.dom.getParent(D,"td,th");return B&&B!==z&&T(B,z)}function T(z,A){return x.dom.getParent(z,"TABLE")===x.dom.getParent(A,"TABLE")}var S=t.keyCode;if(v()&&Z(x)){var Q=x.selection.getNode();c.setEditorTimeout(x,function(){R(Q)&&X(!t.shiftKey&&S===a.UP,Q,t)},0)}}x.on("KeyDown",function(r){o(r)})}function q(){function o(B,t){var A,r=t.ownerDocument,v=r.createRange();return v.setStartBefore(t),v.setEnd(B.endContainer,B.endOffset),A=r.createElement("body"),A.appendChild(v.cloneContents()),0===A.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}x.on("KeyDown",function(t){var z,r,v=x.dom;37!=t.keyCode&&38!=t.keyCode||(z=x.selection.getRng(),r=v.getParent(z.startContainer,"table"),r&&x.getBody().firstChild==r&&o(z,r)&&(z=v.createRng(),z.setStartBefore(r),z.setEndBefore(r),x.selection.setRng(z),t.preventDefault()))})}function m(){x.on("KeyDown SetContent VisualAid",function(){var o;for(o=x.getBody().lastChild;o;o=o.previousSibling){if(3==o.nodeType){if(o.nodeValue.length>0){break}}else{if(1==o.nodeType&&("BR"==o.tagName||!o.getAttribute("data-mce-bogus"))){break}}}o&&"TABLE"==o.nodeName&&(x.settings.forced_root_block?x.dom.add(x.getBody(),x.settings.forced_root_block,x.settings.forced_root_block_attrs,g.ie&&g.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):x.dom.add(x.getBody(),"br",{"data-mce-bogus":"1"}))}),x.on("PreProcess",function(o){var r=o.node.lastChild;r&&("BR"==r.nodeName||1==r.childNodes.length&&("BR"==r.firstChild.nodeName||"\xa0"==r.firstChild.nodeValue))&&r.previousSibling&&"TABLE"==r.previousSibling.nodeName&&x.dom.remove(r)})}function p(){function o(F,t,I,K){var G,J,v,L=3,H=F.dom.getParent(t.startContainer,"TABLE");return H&&(G=H.parentNode),J=t.startContainer.nodeType==L&&0===t.startOffset&&0===t.endOffset&&K&&("TR"==I.nodeName||I==G),v=("TD"==I.nodeName||"TH"==I.nodeName)&&!K,J||v}function r(){var t=x.selection.getRng(),A=x.selection.getNode(),B=x.dom.getParent(t.startContainer,"TD,TH");if(o(x,t,A,B)){B||(B=A);for(var v=B.lastChild;v.lastChild;){v=v.lastChild}3==v.nodeType&&(t.setEnd(v,v.data.length),x.selection.setRng(t))}}x.on("KeyDown",function(){r()}),x.on("MouseDown",function(t){2!=t.button&&r()})}function w(){function r(t){x.selection.select(t,!0),x.selection.collapse(!0)}function o(t){x.$(t).empty(),d.paddCell(t)}x.on("keydown",function(C){if((C.keyCode==a.DELETE||C.keyCode==a.BACKSPACE)&&!C.isDefaultPrevented()){var v,t,B,D;if(v=x.dom.getParent(x.selection.getStart(),"table")){if(t=x.dom.select("td,th",v),B=b.grep(t,function(y){return !!x.dom.getAttrib(y,"data-mce-selected")}),0===B.length){return D=x.dom.getParent(x.selection.getStart(),"td,th"),void (x.selection.isCollapsed()&&D&&x.dom.isEmpty(D)&&(C.preventDefault(),o(D),r(D)))}C.preventDefault(),x.undoManager.transact(function(){t.length==B.length?x.execCommand("mceTableDelete"):(b.each(B,o),r(B[0]))})}}})}function s(){var o=function(y){return y&&"CAPTION"==y.nodeName&&"TABLE"==y.parentNode.nodeName},I=function(A,y){var z=x.selection.getRng(),B=A.ownerDocument.createTextNode("\xa0");z.startOffset?A.insertBefore(B,A.firstChild):A.appendChild(B),y&&(x.selection.select(B,!0),x.selection.collapse(!0))},F=function(y){return(y.keyCode==a.DELETE||y.keyCode==a.BACKSPACE)&&!y.isDefaultPrevented()},H=function(y){return y.firstChild===y.lastChild&&y.firstChild},t=function(y){return y&&3===y.nodeType},G=function(z){var y=H(z);return t(y)&&1===y.data.length?y.data:null},r=function(A){var y=H(A),z=G(A);return y&&!t(y)||z&&!E(z)},v=function(y){return x.dom.isEmpty(y)||E(G(y))},E=function(y){return"\xa0"===y};x.on("keydown",function(y){if(F(y)){var z=x.dom.getParent(x.selection.getStart(),"caption");o(z)&&(g.ie&&(x.selection.isCollapsed()?r(z)&&I(z):(x.undoManager.transact(function(){x.execCommand("Delete"),v(z)&&I(z,!0)}),y.preventDefault())),v(z)&&y.preventDefault())}})}w(),s(),g.webkit&&(u(),p()),g.gecko&&(q(),m()),g.ie>9&&(q(),m())}}),l("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(b,c,a){return function(s,H){function p(n){s.getBody().style.webkitUserSelect="",(n||f)&&(s.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),f=!1)}function m(n,q){return !(!n||!q)&&n===G.getParent(q,"table")}function d(q){var t,v,n=q.target;if(!E&&!r&&n!==u&&(u=n,o&&g)){if(v=G.getParent(n,"td,th"),m(o,v)||(v=G.getParent(o,"td,th")),g===v&&!f){return}if(H(!0),m(o,v)){q.preventDefault(),I||(I=new w(s,o,g),s.getBody().style.webkitUserSelect="none"),I.setEndCell(v),f=!0,t=s.selection.getSel();try{t.removeAllRanges?t.removeAllRanges():t.empty()}catch(w){}}}}var I,g,o,u,E,r,G=s.dom,f=!0,F=function(){g=I=o=u=null,H(!1)};return s.on("SelectionChange",function(n){f&&n.stopImmediatePropagation()},!0),s.on("MouseDown",function(n){2==n.button||E||r||(p(),g=G.getParent(n.target,"td,th"),o=G.getParent(g,"table"))}),s.on("mouseover",d),s.on("remove",function(){G.unbind(s.getDoc(),"mouseover",d),p()}),s.on("MouseUp",function(){function w(B,A){var z=new c(B,B);do{if(3==B.nodeType&&0!==a.trim(B.nodeValue).length){return void (A?n.setStart(B,0):n.setEnd(B,B.nodeValue.length))}if("BR"==B.nodeName){return void (A?n.setStartBefore(B):n.setEndBefore(B))}}while(B=A?z.next():z.prev())}var n,x,q,y,v,t=s.selection;if(g){if(I&&(s.getBody().style.webkitUserSelect=""),x=G.select("td[data-mce-selected],th[data-mce-selected]"),x.length>0){n=G.createRng(),y=x[0],n.setStartBefore(y),n.setEndAfter(y),w(y,1),q=new c(y,G.getParent(x[0],"table"));do{if("TD"==y.nodeName||"TH"==y.nodeName){if(!G.getAttrib(y,"data-mce-selected")){break}v=y}}while(y=q.next());w(v),t.setRng(n)}s.nodeChanged(),F()}}),s.on("KeyUp Drop SetContent",function(n){p("setcontent"==n.type),F(),E=!1}),s.on("ObjectResizeStart ObjectResized",function(n){E="objectresized"!=n.type}),s.on("dragstart",function(){r=!0}),s.on("drop dragend",function(){r=!1}),{clear:p}}}),l("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(b,c){var a=b.each;return function(r){function d(){var m=r.settings.color_picker_callback;if(m){return function(){var n=this;m.call(r,function(q){n.value(q).fire("change")},n.value())}}}function o(m){return{title:"Advanced",type:"form",defaults:{onchange:function(){C(m,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:d()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:d()}]}]}}function u(m){return m?m.replace(/px$/,""):""}function f(m){return/^[0-9]+$/.test(m)&&(m+="px"),m}function g(m){a("left center right".split(" "),function(n){r.formatter.remove("align"+n,{},m)})}function s(m){a("top middle bottom".split(" "),function(n){r.formatter.remove("valign"+n,{},m)})}function B(t,n,q){function m(v,w){return w=w||[],b.each(v,function(y){var x={text:y.text||y.title};y.menu?x.menu=m(y.menu):(x.value=y.value,n&&n(x)),w.push(x)}),w}return m(t,q||[])}function C(q,v,n){var t=v.toJSON(),m=q.parseStyle(t.style);n?(v.find("#borderColor").value(m["border-color"]||"")[0].fire("change"),v.find("#backgroundColor").value(m["background-color"]||"")[0].fire("change")):(m["border-color"]=t.borderColor,m["background-color"]=t.backgroundColor),v.find("#style").value(q.serializeStyle(q.parseStyle(q.serializeStyle(m))))}function D(q,m,n){var t=q.parseStyle(q.getAttrib(n,"style"));t["border-color"]&&(m.borderColor=t["border-color"]),t["background-color"]&&(m.backgroundColor=t["background-color"]),m.style=q.serializeStyle(t)}function p(n,t,q){var m=n.parseStyle(n.getAttrib(t,"style"));a(q,function(v){m[v.name]=v.value}),n.setAttrib(t,"style",n.serializeStyle(n.parseStyle(n.serializeStyle(m))))}var E=this;E.tableProps=function(){E.table(!0)},E.table=function(t){function x(){function G(H,N,M){if("TD"===H.tagName||"TH"===H.tagName){A.setStyle(H,N,M)}else{if(H.children){for(var O=0;O<H.children.length;O++){G(H.children[O],N,M)}}}}var F;C(A,this),z=b.extend(z,this.toJSON()),z["class"]===!1&&delete z["class"],r.undoManager.transact(function(){if(v||(v=r.plugins.table.insertTable(z.cols||1,z.rows||1)),r.dom.setAttribs(v,{style:z.style,"class":z["class"]}),r.settings.table_style_by_css){if(w=[],w.push({name:"border",value:z.border}),w.push({name:"border-spacing",value:f(z.cellspacing)}),p(A,v,w),A.setAttribs(v,{"data-mce-border-color":z.borderColor,"data-mce-cell-padding":z.cellpadding,"data-mce-border":z.border}),v.children){for(var H=0;H<v.children.length;H++){G(v.children[H],"border",z.border),G(v.children[H],"padding",f(z.cellpadding))}}}else{r.dom.setAttribs(v,{border:z.border,cellpadding:z.cellpadding,cellspacing:z.cellspacing})}A.getAttrib(v,"width")&&!r.settings.table_style_by_css?A.setAttrib(v,"width",u(z.width)):A.setStyle(v,"width",f(z.width)),A.setStyle(v,"height",f(z.height)),F=A.select("caption",v)[0],F&&!z.caption&&A.remove(F),!F&&z.caption&&(F=A.create("caption"),F.innerHTML=c.ie?"\xa0":'<br data-mce-bogus="1"/>',v.insertBefore(F,v.firstChild)),g(v),z.align&&r.formatter.apply("align"+z.align,{},v),r.focus(),r.addVisual()})}function n(L,M){function F(P,K){for(var Q=0;Q<K.length;Q++){var J=A.getStyle(K[Q],M);if("undefined"==typeof P&&(P=J),P!=J){return""}}return P}var H,G=r.dom.select("td,th",L);return H=F(H,G)}var v,I,y,q,m,w,A=r.dom,z={};t===!0?(v=A.getParent(r.selection.getStart(),"table"),v&&(z={width:u(A.getStyle(v,"width")||A.getAttrib(v,"width")),height:u(A.getStyle(v,"height")||A.getAttrib(v,"height")),cellspacing:u(A.getStyle(v,"border-spacing")||A.getAttrib(v,"cellspacing")),cellpadding:A.getAttrib(v,"data-mce-cell-padding")||A.getAttrib(v,"cellpadding")||n(v,"padding"),border:A.getAttrib(v,"data-mce-border")||A.getAttrib(v,"border")||n(v,"border"),borderColor:A.getAttrib(v,"data-mce-border-color"),caption:!!A.select("caption",v)[0],"class":A.getAttrib(v,"class")},a("left center right".split(" "),function(F){r.formatter.matchNode(v,"align"+F)&&(z.align=F)}))):(I={label:"Cols",name:"cols"},y={label:"Rows",name:"rows"}),r.settings.table_class_list&&(z["class"]&&(z["class"]=z["class"].replace(/\s*mce\-item\-table\s*/g,"")),q={name:"class",type:"listbox",label:"Class",values:B(r.settings.table_class_list,function(F){F.value&&(F.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[F.value]})})})}),m={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:r.settings.table_appearance_options!==!1?[I,y,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[I,y,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},q]},r.settings.table_advtab!==!1?(D(A,z,v),r.windowManager.open({title:"Table properties",data:z,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},o(A)],onsubmit:x})):r.windowManager.open({title:"Table properties",data:z,body:m,onsubmit:x})},E.merge=function(n,m){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var q=this.toJSON();r.undoManager.transact(function(){n.merge(m,q.cols,q.rows)})}})},E.cell=function(){function y(H,I,A){(1===q.length||A)&&m.setAttrib(H,I,A)}function n(H,I,A){(1===q.length||A)&&m.setStyle(H,I,A)}function w(){C(m,this),v=b.extend(v,this.toJSON()),r.undoManager.transact(function(){a(q,function(A){y(A,"scope",v.scope),y(A,"style",v.style),y(A,"class",v["class"]),n(A,"width",f(v.width)),n(A,"height",f(v.height)),v.type&&A.nodeName.toLowerCase()!==v.type&&(A=m.rename(A,v.type)),1===q.length&&(g(A),s(A)),v.align&&r.formatter.apply("align"+v.align,{},A),v.valign&&r.formatter.apply("valign"+v.valign,{},A)}),r.focus()})}var z,v,x,m=r.dom,q=[];if(q=r.dom.select("td[data-mce-selected],th[data-mce-selected]"),z=r.dom.getParent(r.selection.getStart(),"td,th"),!q.length&&z&&q.push(z),z=z||q[0]){q.length>1?v={width:"",height:"",scope:"","class":"",align:"",style:"",type:z.nodeName.toLowerCase()}:(v={width:u(m.getStyle(z,"width")||m.getAttrib(z,"width")),height:u(m.getStyle(z,"height")||m.getAttrib(z,"height")),scope:m.getAttrib(z,"scope"),"class":m.getAttrib(z,"class")},v.type=z.nodeName.toLowerCase(),a("left center right".split(" "),function(A){r.formatter.matchNode(z,"align"+A)&&(v.align=A)}),a("top middle bottom".split(" "),function(A){r.formatter.matchNode(z,"valign"+A)&&(v.valign=A)}),D(m,v,z)),r.settings.table_cell_class_list&&(x={name:"class",type:"listbox",label:"Class",values:B(r.settings.table_cell_class_list,function(A){A.value&&(A.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[A.value]})})})});var t={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},x]};r.settings.table_cell_advtab!==!1?r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:v,body:[{title:"General",type:"form",items:t},o(m)],onsubmit:w}):r.windowManager.open({title:"Cell properties",data:v,body:t,onsubmit:w})}},E.row=function(){function w(F,G,H){(1===v.length||H)&&A.setAttrib(F,G,H)}function J(F,G,H){(1===v.length||H)&&A.setStyle(F,G,H)}function x(){var F,G,H;C(A,this),y=b.extend(y,this.toJSON()),r.undoManager.transact(function(){var I=y.type;a(v,function(L){w(L,"scope",y.scope),w(L,"style",y.style),w(L,"class",y["class"]),J(L,"height",f(y.height)),I!==L.parentNode.nodeName.toLowerCase()&&(F=A.getParent(L,"table"),G=L.parentNode,H=A.select(I,F)[0],H||(H=A.create(I),F.firstChild?F.insertBefore(H,F.firstChild):F.appendChild(H)),H.appendChild(L),G.hasChildNodes()||A.remove(G)),1===v.length&&g(L),y.align&&r.formatter.apply("align"+y.align,{},L)}),r.focus()})}var t,q,n,m,y,z,A=r.dom,v=[];t=r.dom.getParent(r.selection.getStart(),"table"),q=r.dom.getParent(r.selection.getStart(),"td,th"),a(t.rows,function(F){a(F.cells,function(G){if(A.getAttrib(G,"data-mce-selected")||G==q){return v.push(F),!1}})}),n=v[0],n&&(v.length>1?y={height:"",scope:"","class":"",align:"",type:n.parentNode.nodeName.toLowerCase()}:(y={height:u(A.getStyle(n,"height")||A.getAttrib(n,"height")),scope:A.getAttrib(n,"scope"),"class":A.getAttrib(n,"class")},y.type=n.parentNode.nodeName.toLowerCase(),a("left center right".split(" "),function(F){r.formatter.matchNode(n,"align"+F)&&(y.align=F)}),D(A,y,n)),r.settings.table_row_class_list&&(m={name:"class",type:"listbox",label:"Class",values:B(r.settings.table_row_class_list,function(F){F.value&&(F.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[F.value]})})})}),z={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},m]},r.settings.table_row_advtab!==!1?r.windowManager.open({title:"Row properties",data:y,bodyType:"tabpanel",body:[{title:"General",type:"form",items:z},o(A)],onsubmit:x}):r.windowManager.open({title:"Row properties",data:y,body:z,onsubmit:x}))}}}),l("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(b,a){var c;return function(I){function O(n,r){return{index:n,y:I.dom.getPos(r).y}}function a0(n,r){return{index:n,y:I.dom.getPos(r).y+r.offsetHeight}}function S(n,r){return{index:n,x:I.dom.getPos(r).x}}function L(n,r){return{index:n,x:I.dom.getPos(r).x+r.offsetWidth}}function T(){var n=I.getBody().dir;return"rtl"===n}function bc(){return I.inline}function bd(){return bc?I.getBody().ownerDocument.body:I.getBody()}function E(n,r){return T()?L(n,r):S(n,r)}function P(n,r){return T()?S(n,r):L(n,r)}function H(n,r){return N(n,"width")/N(r,"width")*100}function N(n,t){var aa=I.dom.getStyle(n,t,!0),r=parseInt(aa,10);return r}function F(r){var t=N(r,"width"),n=N(r.parentElement,"width");return t/n*100}function U(r,t){var n=N(r,"width");return t/n*100}function X(r,t){var n=N(r.parentElement,"width");return t/n*100}function ba(aA,n,aa){for(var aB=[],r=1;r<aa.length;r++){var ab=aa[r].element;aB.push(aA(r-1,ab))}var t=aa[aa.length-1];return aB.push(n(aa.length-1,t.element)),aB}function bf(){var n=I.dom.select("."+v,bd());b.each(n,function(r){I.dom.remove(r)})}function W(n){bf(),be(n)}function V(aC,aA,r,aa,aD,t,aB,ab){var n={"data-mce-bogus":"all","class":v+" "+aC,unselectable:"on","data-mce-resize":!1,style:"cursor: "+aA+"; margin: 0; padding: 0; position: absolute; left: "+r+"px; top: "+aa+"px; height: "+aD+"px; width: "+t+"px; "};return n[aB]=ab,n}function bi(t,n,r){b.each(t,function(ab){var aB=r.x,aa=ab.y-q/2,aC=q,aA=n;I.dom.add(bd(),"div",V(ac,ak,aB,aa,aC,aA,A,ab.index))})}function aj(t,n,r){b.each(t,function(ab){var aB=ab.x-q/2,aa=r.y,aC=n,aA=q;I.dom.add(bd(),"div",V(Z,w,aB,aa,aC,aA,aq,ab.index))})}function az(n){return b.map(n.rows,function(t){var r=b.map(t.cells,function(ab){var aA=ab.hasAttribute("rowspan")?parseInt(ab.getAttribute("rowspan"),10):1,aa=ab.hasAttribute("colspan")?parseInt(ab.getAttribute("colspan"),10):1;return{element:ab,rowspan:aA,colspan:aa}});return{element:t,cells:r}})}function ap(r){function aa(aF,aE){return aF+","+aE}function aD(aF,aE){return ab[aa(aF,aE)]}function t(){var aE=[];return b.each(n,function(aF){aE=aE.concat(aF.cells)}),aE}function aB(){return n}var ab={},n=[],aA=0,aC=0;return b.each(r,function(aF,aE){var aG=[];b.each(aF.cells,function(aK){for(var aI=0;ab[aa(aE,aI)]!==e;){aI++}for(var aH={element:aK.element,colspan:aK.colspan,rowspan:aK.rowspan,rowIndex:aE,colIndex:aI},aM=0;aM<aK.colspan;aM++){for(var aJ=0;aJ<aK.rowspan;aJ++){var aN=aE+aJ,aL=aI+aM;ab[aa(aN,aL)]=aH,aA=Math.max(aA,aN+1),aC=Math.max(aC,aL+1)}}aG.push(aH)}),n.push({element:aF.element,cells:aG})}),{grid:{maxRows:aA,maxCols:aC},getAt:aD,getAllCells:t,getAllRows:aB}}function K(n,t){for(var aa=[],r=n;r<t;r++){aa.push(r)}return aa}function ar(aA,r,aa){for(var n,t=aA(),ab=0;ab<t.length;ab++){r(t[ab])&&(n=t[ab])}return n?n:aa()}function ao(t){var n=K(0,t.grid.maxCols),r=K(0,t.grid.maxRows);return b.map(n,function(aA){function aa(){for(var aC=[],aE=0;aE<r.length;aE++){var aD=t.getAt(aE,aA);aD&&aD.colIndex===aA&&aC.push(aD)}return aC}function aB(aC){return 1===aC.colspan}function ab(){for(var aC,aD=0;aD<r.length;aD++){if(aC=t.getAt(aD,aA)){return aC}}return null}return ar(aa,aB,ab)})}function D(t){var n=K(0,t.grid.maxCols),r=K(0,t.grid.maxRows);return b.map(r,function(ab){function aA(){for(var aD=[],aE=0;aE<n.length;aE++){var aC=t.getAt(ab,aE);aC&&aC.rowIndex===ab&&aD.push(aC)}return aD}function aB(aC){return 1===aC.rowspan}function aa(){return t.getAt(ab,0)}return ar(aA,aB,aa)})}function be(ab){var aC=az(ab),r=ap(aC),aA=D(r),aB=ao(r),aa=I.dom.getPos(ab),n=aA.length>0?ba(O,a0,aA):[],t=aB.length>0?ba(E,P,aB):[];bi(n,ab.offsetWidth,aa),aj(t,ab.offsetHeight,aa)}function bh(aF,t,aa,aB){if(t<0||t>=aF.length-1){return""}var aG=aF[t];if(aG){aG={value:aG,delta:0}}else{for(var aA=aF.slice(0,t).reverse(),aC=0;aC<aA.length;aC++){aA[aC]&&(aG={value:aA[aC],delta:aC+1})}}var r=aF[t+1];if(r){r={value:r,delta:1}}else{for(var n=aF.slice(t+1),ab=0;ab<n.length;ab++){n[ab]&&(r={value:n[ab],delta:ab+1})}}var aD=r.delta-aG.delta,aE=Math.abs(r.value-aG.value)/aD;return aa?aE/N(aB,"width")*100:aE}function ag(r,t){var n=I.dom.getStyle(r,t);return n||(n=I.dom.getAttrib(r,t)),n||(n=I.dom.getStyle(r,t,!0)),n}function ai(aA,r,aa){var n=ag(aA,"width"),t=parseInt(n,10),ab=r?H(aA,aa):N(aA,"width");return(r&&!au(n)||!r&&!x(n))&&(t=0),!isNaN(t)&&t>0?t:ab}function am(aA,r,aa){for(var aD=ao(aA),t=b.map(aD,function(aE){return E(aE.colIndex,aE.element).x}),aC=[],ab=0;ab<aD.length;ab++){var n=aD[ab].element.hasAttribute("colspan")?parseInt(aD[ab].element.getAttribute("colspan"),10):1,aB=n>1?bh(t,ab):ai(aD[ab].element,r,aa);aB=aB?aB:g,aC.push(aB)}return aC}function al(r){var t=ag(r,"height"),n=parseInt(t,10);return au(t)&&(n=0),!isNaN(n)&&n>0?n:N(r,"height")}function bl(aA){for(var t=D(aA),aa=b.map(t,function(aC){return O(aC.rowIndex,aC.element).y}),aB=[],n=0;n<t.length;n++){var ab=t[n].element.hasAttribute("rowspan")?parseInt(t[n].element.getAttribute("rowspan"),10):1,r=ab>1?bh(aa,n):al(t[n].element);r=r?r:ad,aB.push(r)}return aB}function d(aa,t,aA,aF,ab){function aC(aG){return b.map(aG,function(){return 0})}function r(){var aH;if(ab){aH=[100-aE[0]]}else{var aG=Math.max(aF,aE[0]+aA);aH=[aG-aE[0]]}return aH}function n(aJ,aL){var aG,aI=aC(aE.slice(0,aJ)),aK=aC(aE.slice(aL+1));if(aA>=0){var aN=Math.max(aF,aE[aL]-aA);aG=aI.concat([aA,aN-aE[aL]]).concat(aK)}else{var aM=Math.max(aF,aE[aJ]+aA),aH=aE[aJ]-aM;aG=aI.concat([aM-aE[aJ],aH]).concat(aK)}return aG}function aB(aK,aG){var aI,aJ=aC(aE.slice(0,aG));if(aA>=0){aI=aJ.concat([aA])}else{var aH=Math.max(aF,aE[aG]+aA);aI=aJ.concat([aH-aE[aG]])}return aI}var aD,aE=aa.slice(0);return aD=0===aa.length?[]:1===aa.length?r():0===t?n(0,1):t>0&&t<aa.length-1?n(t,t+1):t===aa.length-1?aB(t-1,t):[]}function bj(ab,r,aa){for(var n=0,t=ab;t<r;t++){n+=aa[t]}return n}function Y(t,n){var r=t.getAllCells();return b.map(r,function(aa){var ab=bj(aa.colIndex,aa.colIndex+aa.colspan,n);return{element:aa.element,width:ab,colspan:aa.colspan}})}function at(t,n){var r=t.getAllCells();return b.map(r,function(aa){var ab=bj(aa.rowIndex,aa.rowIndex+aa.rowspan,n);return{element:aa.element,height:ab,rowspan:aa.rowspan}})}function av(t,n){var r=t.getAllRows();return b.map(r,function(aa,ab){return{element:aa.element,height:n[ab]}})}function au(n){return o.test(n)}function x(n){return p.test(n)}function Q(aB,aF,aI){function aG(aN,aO){b.each(aN,function(aP){I.dom.setStyle(aP.element,"width",aP.width+aO),I.dom.setAttrib(aP.element,"width",null)})}function n(){return aI<t.grid.maxCols-1?F(aB):F(aB)+X(aB,aF)}function ab(){return aI<t.grid.maxCols-1?N(aB,"width"):N(aB,"width")+aF}function aD(aN,aO,aP){aI!=t.grid.maxCols-1&&aP||(I.dom.setStyle(aB,"width",aN+aO),I.dom.setAttrib(aB,"width",null))}for(var aJ=az(aB),t=ap(aJ),aa=au(aB.width)||au(aB.style.width),aA=am(t,aa,aB),aH=aa?U(aB,aF):aF,aC=d(aA,aI,aH,g,aa,aB),r=[],aK=0;aK<aC.length;aK++){r.push(aC[aK]+aA[aK])}var aM=Y(t,r),aL=aa?"%":"px",aE=aa?n():ab();I.undoManager.transact(function(){aG(aM,aL),aD(aE,aL,aa)})}function J(aa,t,aA){for(var ab=az(aa),aC=ap(ab),r=bl(aC),n=[],aB=0,aD=0;aD<r.length;aD++){n.push(aD===aA?t+r[aD]:r[aD]),aB+=aB[aD]}var aE=at(aC,n),aF=av(aC,n);I.undoManager.transact(function(){b.each(aF,function(aG){I.dom.setStyle(aG.element,"height",aG.height+"px"),I.dom.setAttrib(aG.element,"height",null)}),b.each(aE,function(aG){I.dom.setStyle(aG.element,"height",aG.height+"px"),I.dom.setAttrib(aG.element,"height",null)}),I.dom.setStyle(aa,"height",aB+"px"),I.dom.setAttrib(aa,"height",null)})}function ax(){C=setTimeout(function(){ae()},200)}function aw(){clearTimeout(C)}function af(){var n=document.createElement("div");return n.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),n.setAttribute("data-mce-bogus","all"),n}function bk(n,r){I.dom.bind(n,"mouseup",function(){ae()}),I.dom.bind(n,"mousemove",function(t){aw(),z&&r(t)}),I.dom.bind(n,"mouseout",function(){ax()})}function ae(){if(I.dom.remove(u),z){I.dom.removeClass(bb,y),z=!1;var aA,r;if(ay(bb)){var aa=parseInt(I.dom.getAttrib(bb,ah),10),ab=I.dom.getPos(bb).x;aA=parseInt(I.dom.getAttrib(bb,aq),10),r=T()?aa-ab:ab-aa,Math.abs(r)>=1&&Q(c,r,aA)}else{if(m(bb)){var t=parseInt(I.dom.getAttrib(bb,B),10),n=I.dom.getPos(bb).y;aA=parseInt(I.dom.getAttrib(bb,A),10),r=n-t,Math.abs(r)>=1&&J(c,r,aA)}}W(c),I.nodeChanged()}}function an(n,r){u=u?u:af(),z=!0,I.dom.addClass(n,y),bb=n,bk(u,r),I.dom.add(bd(),u)}function ay(n){return I.dom.hasClass(n,Z)}function m(n){return I.dom.hasClass(n,ac)}function bg(r){R=R!==e?R:r.clientX;var n=r.clientX-R;R=r.clientX;var t=I.dom.getPos(bb).x;I.dom.setStyle(bb,"left",t+n+"px")}function bm(r){f=f!==e?f:r.clientY;var n=r.clientY-f;f=r.clientY;var t=I.dom.getPos(bb).y;I.dom.setStyle(bb,"top",t+n+"px")}function s(n){R=e,an(n,bg)}function M(n){f=e,an(n,bm)}function G(n){var r=n.target,aa=I.getBody();if(I.$.contains(aa,c)||c===aa){if(ay(r)){n.preventDefault();var ab=I.dom.getPos(r).x;I.dom.setAttrib(r,ah,ab),s(r)}else{if(m(r)){n.preventDefault();var t=I.dom.getPos(r).y;I.dom.setAttrib(r,B,t),M(r)}else{bf()}}}}var C,z,u,bb,R,f,v="mce-resize-bar",ac="mce-resize-bar-row",ak="row-resize",A="data-row",B="data-initial-top",Z="mce-resize-bar-col",w="col-resize",aq="data-col",ah="data-initial-left",q=4,g=10,ad=10,y="mce-resize-bar-dragging",o=new RegExp(/(\d+(\.\d+)?%)/),p=new RegExp(/px|em/);return I.on("init",function(){I.dom.bind(bd(),"mousedown",G)}),I.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var r=[];b.each(n.rows,function(aa){b.each(aa.cells,function(ab){var aA=I.dom.getStyle(ab,"width",!0);r.push({cell:ab,width:aA})})}),b.each(r,function(aa){I.dom.setStyle(aa.cell,"width",aa.width),I.dom.setAttrib(aa.cell,"width",null)})}}),I.on("mouseover",function(n){if(!z){var r=I.dom.getParent(n.target,"table");("TABLE"===n.target.nodeName||r)&&(c=r,W(r))}}),I.on("keydown",function(n){switch(n.keyCode){case a.LEFT:case a.RIGHT:case a.UP:case a.DOWN:bf()}}),I.on("remove",function(){bf(),I.dom.unbind(bd(),"mousedown",G)}),{adjustWidth:Q,adjustHeight:J,clearBars:bf,drawBars:be,determineDeltas:d,getTableGrid:ap,getTableDetails:az,getWidths:am,getPixelHeights:bl,isPercentageBasedSize:au,isPixelBasedSize:x,recalculateWidths:Y,recalculateCellHeights:at,recalculateRowHeights:av}}}),l("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(a,o,d,g,b,f,s,n,c){function r(C){function p(A){return function(){C.execCommand(A)}}function y(D,B){var H,G,F,A;for(F='<table id="__mce"><tbody>',H=0;H<B;H++){for(F+="<tr>",G=0;G<D;G++){F+="<td>"+(n.ie&&n.ie<10?"&nbsp;":"<br>")+"</td>"}F+="</tr>"}return F+="</tbody></table>",C.undoManager.transact(function(){C.insertContent(F),A=C.dom.get("__mce"),C.dom.setAttrib(A,"id",null),C.$("tr",A).each(function(I,J){C.fire("newrow",{node:J}),C.$("th,td",J).each(function(K,L){C.fire("newcell",{node:L})})}),C.dom.setAttribs(A,C.settings.table_default_attributes||{}),C.dom.setStyles(A,C.settings.table_default_styles||{})}),A}function E(B,A,F){function D(){var G,I,K,H={},J=0;I=C.dom.select("td[data-mce-selected],th[data-mce-selected]"),G=I[0],G||(G=C.selection.getStart()),F&&I.length>0?(t(I,function(L){return H[L.parentNode.parentNode.nodeName]=1}),t(H,function(L){J+=L}),K=1!==J):K=!C.dom.getParent(G,A),B.disabled(K),C.selection.selectorChanged(A,function(L){B.disabled(!L)})}C.initialized?D():C.on("init",D)}function u(){E(this,"table")}function v(){E(this,"td,th")}function Q(){E(this,"td,th",!0)}function x(){var D="";D='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var A=0;A<10;A++){D+="<tr>";for(var B=0;B<10;B++){D+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*A+B)+'" href="#" data-mce-x="'+B+'" data-mce-y="'+A+'"></a></td>'}D+="</tr>"}return D+="</table>",D+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function z(J,F,A){var B,K,H,D,L,G=A.getEl().getElementsByTagName("table")[0],I=A.isRtl()||"tl-tr"==A.parent().rel;for(G.nextSibling.innerHTML=J+1+" x "+(F+1),I&&(J=9-J),K=0;K<10;K++){for(B=0;B<10;B++){D=G.rows[K].childNodes[B].firstChild,L=(I?B>=J:B<=J)&&K<=F,C.dom.toggleClass(D,"mce-active",L),L&&(H=D)}}return H.parentNode}function w(){C.addButton("tableprops",{title:"Table properties",onclick:W.tableProps,icon:"table"}),C.addButton("tabledelete",{title:"Delete table",onclick:p("mceTableDelete")}),C.addButton("tablecellprops",{title:"Cell properties",onclick:p("mceTableCellProps")}),C.addButton("tablemergecells",{title:"Merge cells",onclick:p("mceTableMergeCells")}),C.addButton("tablesplitcells",{title:"Split cell",onclick:p("mceTableSplitCells")}),C.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:p("mceTableInsertRowBefore")}),C.addButton("tableinsertrowafter",{title:"Insert row after",onclick:p("mceTableInsertRowAfter")}),C.addButton("tabledeleterow",{title:"Delete row",onclick:p("mceTableDeleteRow")}),C.addButton("tablerowprops",{title:"Row properties",onclick:p("mceTableRowProps")}),C.addButton("tablecutrow",{title:"Cut row",onclick:p("mceTableCutRow")}),C.addButton("tablecopyrow",{title:"Copy row",onclick:p("mceTableCopyRow")}),C.addButton("tablepasterowbefore",{title:"Paste row before",onclick:p("mceTablePasteRowBefore")}),C.addButton("tablepasterowafter",{title:"Paste row after",onclick:p("mceTablePasteRowAfter")}),C.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:p("mceTableInsertColBefore")}),C.addButton("tableinsertcolafter",{title:"Insert column after",onclick:p("mceTableInsertColAfter")}),C.addButton("tabledeletecol",{title:"Delete column",onclick:p("mceTableDeleteCol")})}function N(B){var A=C.dom.is(B,"table")&&C.getBody().contains(B);return A}function V(){var A=C.settings.table_toolbar;""!==A&&A!==!1&&(A||(A="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),C.addContextToolbar(N,A))}function q(){return U}function S(A){U=A}var U,R,T=this,W=new g(C);!C.settings.object_resizing||C.settings.table_resize_bars===!1||C.settings.object_resizing!==!0&&"table"!==C.settings.object_resizing||(R=b(C)),C.settings.table_grid===!1?C.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:W.table}):C.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(A){A.aria&&(this.parent().hideAll(),A.stopImmediatePropagation(),W.table())},onshow:function(){z(0,0,this.menu.items()[0])},onhide:function(){var A=this.menu.items()[0].getEl().getElementsByTagName("a");C.dom.removeClass(A,"mce-active"),C.dom.addClass(A[0],"mce-active")},menu:[{type:"container",html:x(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(B){var A,F,D=B.target;"A"==D.tagName.toUpperCase()&&(A=parseInt(D.getAttribute("data-mce-x"),10),F=parseInt(D.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(A=9-A),A===this.lastX&&F===this.lastY||(z(A,F,B.control),this.lastX=A,this.lastY=F))},onclick:function(B){var A=this;"A"==B.target.tagName.toUpperCase()&&(B.preventDefault(),B.stopPropagation(),A.parent().cancel(),C.undoManager.transact(function(){y(A.lastX+1,A.lastY+1)}),C.addVisual())}}]}),C.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:u,onclick:W.tableProps}),C.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:u,cmd:"mceTableDelete"}),C.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:p("mceTableCellProps"),onPostRender:v},{text:"Merge cells",onclick:p("mceTableMergeCells"),onPostRender:Q},{text:"Split cell",onclick:p("mceTableSplitCells"),onPostRender:v}]}),C.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:p("mceTableInsertRowBefore"),onPostRender:v},{text:"Insert row after",onclick:p("mceTableInsertRowAfter"),onPostRender:v},{text:"Delete row",onclick:p("mceTableDeleteRow"),onPostRender:v},{text:"Row properties",onclick:p("mceTableRowProps"),onPostRender:v},{text:"-"},{text:"Cut row",onclick:p("mceTableCutRow"),onPostRender:v},{text:"Copy row",onclick:p("mceTableCopyRow"),onPostRender:v},{text:"Paste row before",onclick:p("mceTablePasteRowBefore"),onPostRender:v},{text:"Paste row after",onclick:p("mceTablePasteRowAfter"),onPostRender:v}]}),C.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:p("mceTableInsertColBefore"),onPostRender:v},{text:"Insert column after",onclick:p("mceTableInsertColAfter"),onPostRender:v},{text:"Delete column",onclick:p("mceTableDeleteCol"),onPostRender:v}]});var m=[];t("inserttable tableprops deletetable | cell row column".split(" "),function(A){"|"==A?m.push({text:"-"}):m.push(C.menuItems[A])}),C.addButton("table",{type:"menubutton",title:"Table",menu:m}),n.isIE||C.on("click",function(A){A=A.target,"TABLE"===A.nodeName&&(C.selection.select(A),C.nodeChanged())}),T.quirks=new o(C),C.on("Init",function(){T.cellSelection=new d(C,function(A){A&&R&&R.clearBars()}),T.resizeBars=R}),C.on("PreInit",function(){C.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(D,A){for(var B=D.length;B--;){D[B].attr(A,null)}})}),t({mceTableSplitCells:function(A){A.split()},mceTableMergeCells:function(B){var A;A=C.dom.getParent(C.selection.getStart(),"th,td"),C.dom.select("td[data-mce-selected],th[data-mce-selected]").length?B.merge():W.merge(B,A)},mceTableInsertRowBefore:function(A){A.insertRows(!0)},mceTableInsertRowAfter:function(A){A.insertRows()},mceTableInsertColBefore:function(A){A.insertCols(!0)},mceTableInsertColAfter:function(A){A.insertCols()},mceTableDeleteCol:function(A){A.deleteCols()},mceTableDeleteRow:function(A){A.deleteRows()},mceTableCutRow:function(A){U=A.cutRows()},mceTableCopyRow:function(A){U=A.copyRows()},mceTablePasteRowBefore:function(A){A.pasteRows(U,!0)},mceTablePasteRowAfter:function(A){A.pasteRows(U)},mceSplitColsBefore:function(A){A.splitCols(!0)},mceSplitColsAfter:function(A){A.splitCols(!1)},mceTableDelete:function(A){R&&R.clearBars(),A.deleteTable()}},function(A,B){C.addCommand(B,function(){var D=new a(C);D&&(A(D),C.execCommand("mceRepaint"),T.cellSelection.clear())})}),t({mceInsertTable:W.table,mceTableProps:function(){W.table(!0)},mceTableRowProps:W.row,mceTableCellProps:W.cell},function(B,A){C.addCommand(A,function(D,F){B(F)})}),w(),V(),C.settings.table_tab_navigation!==!1&&C.on("keydown",function(F){var D,B,A;9==F.keyCode&&(D=C.dom.getParent(C.selection.getStart(),"th,td"),D&&(F.preventDefault(),B=new a(C),A=F.shiftKey?-1:1,C.undoManager.transact(function(){!B.moveRelIdx(D,A)&&A>0&&(B.insertRow(),B.refresh(),B.moveRelIdx(D,A))})))}),T.insertTable=y,T.setClipboardRows=S,T.getClipboardRows=q}var t=f.each;c.add("table",r)})}(window);