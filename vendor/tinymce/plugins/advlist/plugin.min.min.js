tinymce.PluginManager.add("advlist",function(h){function m(a){return h.$.contains(h.getBody(),a)}function d(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)&&m(a)}function b(i,a){var l=[];return a&&tinymce.each(a.split(/[ ,]/),function(n){l.push({text:n.replace(/\-/g," ").replace(/\b\w/g,function(o){return o.toUpperCase()}),data:"default"==n?"":n})}),l}function g(a,e){h.undoManager.transact(function(){var q,n=h.dom,s=h.selection;if(q=n.getParent(s.getNode(),"ol,ul"),!q||q.nodeName!=a||e===!1){var l={"list-style-type":e?e:""};h.execCommand("UL"==a?"InsertUnorderedList":"InsertOrderedList",!1,l)}q=n.getParent(s.getNode(),"ol,ul"),q&&tinymce.util.Tools.each(n.select("ol,ul",q).concat([q]),function(i){i.nodeName!==a&&e!==!1&&(i=n.rename(i,a)),n.setStyle(i,"listStyleType",e?e:null),i.removeAttribute("data-mce-style")}),h.focus()})}function c(a){var e=h.dom.getStyle(h.dom.getParent(h.selection.getNode(),"ol,ul"),"listStyleType")||"";a.control.items().each(function(i){i.active(i.settings.data===e)})}var j,p,f=function(i,a){var l=i.settings.plugins?i.settings.plugins:"";return tinymce.util.Tools.inArray(l.split(/[ ,]/),a)!==-1};j=b("OL",h.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),p=b("UL",h.getParam("advlist_bullet_styles","default,circle,disc,square"));var k=function(a){return function(){var e=this;h.on("NodeChange",function(n){var l=tinymce.util.Tools.grep(n.parents,d);e.active(l.length>0&&l[0].nodeName===a)})}};f(h,"lists")&&(h.addCommand("ApplyUnorderedListStyle",function(i,a){g("UL",a["list-style-type"])}),h.addCommand("ApplyOrderedListStyle",function(i,a){g("OL",a["list-style-type"])}),h.addButton("numlist",{type:j.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:j,onPostRender:k("OL"),onshow:c,onselect:function(a){g("OL",a.control.settings.data)},onclick:function(){g("OL",!1)}}),h.addButton("bullist",{type:p.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:k("UL"),menu:p,onshow:c,onselect:function(a){g("UL",a.control.settings.data)},onclick:function(){g("UL",!1)}}))});