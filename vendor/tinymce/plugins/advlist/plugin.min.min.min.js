tinymce.PluginManager.add("advlist",function(n){function e(b){return n.$.contains(n.getBody(),b)}function r(b){return b&&/^(OL|UL|DL)$/.test(b.nodeName)&&e(b)}function t(d,c){var b=[];return c&&tinymce.each(c.split(/[ ,]/),function(f){b.push({text:f.replace(/\-/g," ").replace(/\b\w/g,function(g){return g.toUpperCase()}),data:"default"==f?"":f})}),b}function o(b,c){n.undoManager.transact(function(){var g,h=n.dom,f=n.selection;if(g=h.getParent(f.getNode(),"ol,ul"),!g||g.nodeName!=b||c===!1){var d={"list-style-type":c?c:""};n.execCommand("UL"==b?"InsertUnorderedList":"InsertOrderedList",!1,d)}g=h.getParent(f.getNode(),"ol,ul"),g&&tinymce.util.Tools.each(h.select("ol,ul",g).concat([g]),function(j){j.nodeName!==b&&c!==!1&&(j=h.rename(j,b)),h.setStyle(j,"listStyleType",c?c:null),j.removeAttribute("data-mce-style")}),n.focus()})}function s(b){var c=n.dom.getStyle(n.dom.getParent(n.selection.getNode(),"ol,ul"),"listStyleType")||"";b.control.items().each(function(d){d.active(d.settings.data===c)})}var l,a,q=function(d,c){var b=d.settings.plugins?d.settings.plugins:"";return tinymce.util.Tools.inArray(b.split(/[ ,]/),c)!==-1};l=t("OL",n.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),a=t("UL",n.getParam("advlist_bullet_styles","default,circle,disc,square"));var i=function(b){return function(){var c=this;n.on("NodeChange",function(f){var d=tinymce.util.Tools.grep(f.parents,r);c.active(d.length>0&&d[0].nodeName===b)})}};q(n,"lists")&&(n.addCommand("ApplyUnorderedListStyle",function(c,b){o("UL",b["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(c,b){o("OL",b["list-style-type"])}),n.addButton("numlist",{type:l.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:l,onPostRender:i("OL"),onshow:s,onselect:function(b){o("OL",b.control.settings.data)},onclick:function(){o("OL",!1)}}),n.addButton("bullist",{type:a.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:i("UL"),menu:a,onshow:s,onselect:function(b){o("UL",b.control.settings.data)},onclick:function(){o("UL",!1)}}))});