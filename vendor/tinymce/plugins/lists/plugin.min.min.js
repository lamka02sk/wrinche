!function(){var h={},d=function(r){for(var x=h[r],q=x.deps,w=x.defn,m=q.length,v=new Array(m),e=0;e<m;++e){v[e]=g(q[e])}var p=w.apply(null,v);if(void 0===p){throw"module ["+r+"] returned undefined"}x.instance=p},k=function(a,i,e){if("string"!=typeof a){throw"module id must be a string"}if(void 0===i){throw"no dependencies for "+a}if(void 0===e){throw"no definition function for "+a}h[a]={deps:i,defn:e,instance:void 0}},g=function(e){var a=h[e];if(void 0===a){throw"module ["+e+"] was undefined"}return void 0===a.instance&&d(e),a.instance},c=function(m,l){for(var q=m.length,a=new Array(q),p=0;p<q;++p){a.push(g(m[p]))}l.apply(null,l)},j={};j.bolt={module:{api:{define:k,require:c,demand:g}}};var b=k,f=function(i,a){b(i,[],function(){return a})};f("1",tinymce.PluginManager),f("2",tinymce.util.Tools),f("3",tinymce.util.VK),b("4",[],function(){var x=function(a){return a&&3===a.nodeType},A=function(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)},q=function(a){return a&&/^(LI|DT|DD)$/.test(a.nodeName)},m=function(a){return a&&"BR"===a.nodeName},w=function(a){return a.parentNode.firstChild===a},p=function(a){return a.parentNode.lastChild===a},y=function(i,a){return a&&!!i.schema.getTextBlockElements()[a.nodeName]},B=function(i,a){return !!m(a)&&!(!i.isBlock(a.nextSibling)||m(a.previousSibling))},v=function(l,a,o){var i=l.isEmpty(a);return !(o&&l.select("span[data-mce-type=bookmark]",a).length>0)&&i},z=function(i,a){return i.isChildOf(a,i.getRoot())};return{isTextNode:x,isListNode:A,isListItemNode:q,isBr:m,isFirstChild:w,isLastChild:p,isTextBlock:y,isBogusBr:B,isEmpty:v,isChildOfBody:z}}),f("9",tinymce.dom.TreeWalker),f("a",tinymce.dom.RangeUtils),b("b",["2","4"],function(i,a){var l=function(e){return i.grep(e.selection.getSelectedBlocks(),function(m){return a.isListItemNode(m)})};return{getSelectedListItems:l}}),f("h",tinymce.dom.DOMUtils.DOM),b("d",["a","4"],function(l,a){var m=function(s,p){var e=l.getNode(s,p);if(a.isListItemNode(s)&&a.isTextNode(e)){var q=p>=s.childNodes.length?e.data.length:0;return{container:e,offset:q}}return{container:s,offset:p}},i=function(q){var o=q.cloneRange(),p=m(q.startContainer,q.startOffset);o.setStart(p.container,p.offset);var n=m(q.endContainer,q.endOffset);return o.setEnd(n.container,n.offset),o};return{getNormalizedEndPoint:m,normalizeRange:i}}),b("c",["h","4","d"],function(o,l,p){var m=function(e){var q={},i=function(t){var s,u,n;u=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"],1===u.nodeType&&(s=o.create("span",{"data-mce-type":"bookmark"}),u.hasChildNodes()?(n=Math.min(n,u.childNodes.length-1),t?u.insertBefore(s,u.childNodes[n]):o.insertAfter(s,u.childNodes[n])):u.appendChild(s),u=s,n=0),q[t?"startContainer":"endContainer"]=u,q[t?"startOffset":"endOffset"]=n};return i(!0),e.collapsed||i(),q},a=function(n){function q(w){var u,t,v,s=function(r){for(var i=r.parentNode.firstChild,x=0;i;){if(i===r){return x}1===i.nodeType&&"bookmark"===i.getAttribute("data-mce-type")||x++,i=i.nextSibling}return -1};u=v=n[w?"startContainer":"endContainer"],t=n[w?"startOffset":"endOffset"],u&&(1===u.nodeType&&(t=s(u),u=u.parentNode,o.remove(v)),n[w?"startContainer":"endContainer"]=u,n[w?"startOffset":"endOffset"]=t)}q(!0),q();var e=o.createRng();return e.setStart(n.startContainer,n.startOffset),n.endContainer&&e.setEnd(n.endContainer,n.endOffset),p.normalizeRange(e)};return{createBookmark:m,resolveBookmark:a}}),b("e",["h","2","4"],function(o,l,p){var m=function(n,q){var e,s=q.parentNode;"LI"===s.nodeName&&s.firstChild===q&&(e=s.previousSibling,e&&"LI"===e.nodeName?(e.appendChild(q),p.isEmpty(n,s)&&o.remove(s)):o.setStyle(s,"listStyleType","none")),p.isListNode(s)&&(e=s.previousSibling,e&&"LI"===e.nodeName&&e.appendChild(q))},a=function(i,q){l.each(l.grep(i.select("ol,ul",q)),function(e){m(i,e)})};return{normalizeList:m,normalizeLists:a}}),f("f",tinymce.dom.BookmarkManager),f("j",tinymce.Env),b("i",["h","j"],function(i,a){var l=function(p,e,t){var m,w,y,q=i.createFragment(),x=p.schema.getBlockElements();if(p.settings.forced_root_block&&(t=t||p.settings.forced_root_block),t&&(w=i.create(t),w.tagName===p.settings.forced_root_block&&i.setAttribs(w,p.settings.forced_root_block_attrs),q.appendChild(w)),e){for(;m=e.firstChild;){var v=m.nodeName;y||"SPAN"===v&&"bookmark"===m.getAttribute("data-mce-type")||(y=!0),x[v]?(q.appendChild(m),w=null):t?(w||(w=i.create(t),q.appendChild(w)),w.appendChild(m)):q.appendChild(m)}}return p.settings.forced_root_block?y||a.ie&&!(a.ie>10)||w.appendChild(i.create("br",{"data-mce-bogus":"1"})):q.appendChild(i.create("br")),q};return{createNewTextBlock:l}}),b("g",["h","2","i","4"],function(o,l,p,m){var a=function(q,e,w,y){var n,x,v,t,r=function(i){l.each(v,function(s){i.parentNode.insertBefore(s,w.parentNode)}),o.remove(i)};for(v=o.select('span[data-mce-type="bookmark"]',e),y=y||p.createNewTextBlock(q,w),n=o.createRng(),n.setStartAfter(w),n.setEndAfter(e),x=n.extractContents(),t=x.firstChild;t;t=t.firstChild){if("LI"===t.nodeName&&q.dom.isEmpty(t)){o.remove(t);break}}q.dom.isEmpty(x)||o.insertAfter(x,e),o.insertAfter(y,e),m.isEmpty(q.dom,w.parentNode)&&r(w.parentNode),o.remove(w),m.isEmpty(q.dom,e)&&o.remove(e)};return{splitList:a}}),b("7",["h","4","c","b","g","e","i"],function(x,A,q,m,w,p,y){var B=function(e,a){A.isEmpty(e,a)&&x.remove(a)},v=function(s,i){var a,e=i.parentNode,o=e.parentNode;return e===s.getBody()||("DD"===i.nodeName?(x.rename(i,"DT"),!0):A.isFirstChild(i)&&A.isLastChild(i)?("LI"===o.nodeName?(x.insertAfter(i,o),B(s.dom,o),x.remove(e)):A.isListNode(o)?x.remove(e,!0):(o.insertBefore(y.createNewTextBlock(s,i),e),x.remove(e)),!0):A.isFirstChild(i)?("LI"===o.nodeName?(x.insertAfter(i,o),i.appendChild(e),B(s.dom,o)):A.isListNode(o)?o.insertBefore(i,e):(o.insertBefore(y.createNewTextBlock(s,i),e),x.remove(i)),!0):A.isLastChild(i)?("LI"===o.nodeName?x.insertAfter(i,o):A.isListNode(o)?x.insertAfter(i,e):(x.insertAfter(y.createNewTextBlock(s,i),e),x.remove(i)),!0):("LI"===o.nodeName?(e=o,a=y.createNewTextBlock(s,i,"LI")):a=A.isListNode(o)?y.createNewTextBlock(s,i,"LI"):y.createNewTextBlock(s,i),w.splitList(s,e,i,a),p.normalizeLists(s.dom,e.parentNode),!0))},z=function(E){var C=m.getSelectedListItems(E);if(C.length){var r,F,l=q.createBookmark(E.selection.getRng(!0)),D=E.getBody();for(r=C.length;r--;){for(var n=C[r].parentNode;n&&n!==D;){for(F=C.length;F--;){if(C[F]===n){C.splice(r,1);break}}n=n.parentNode}}for(r=0;r<C.length&&(v(E,C[r])||0!==r);r++){}return E.selection.setRng(q.resolveBookmark(l)),E.nodeChanged(),!0}};return{outdent:v,outdentSelection:z}}),b("8",["2","f","b","4","c","g","e","7"],function(P,B,I,F,L,H,T,D){var K=function(l,a,m){var i=m["list-style-type"]?m["list-style-type"]:null;l.setStyle(a,"list-style-type",i)},A=function(a,e){P.each(e,function(i,l){a.setAttribute(l,i)})},R=function(a,i,e){A(i,e["list-attributes"]),P.each(a.select("li",i),function(l){A(l,e["list-item-attributes"])})},Q=function(i,a,l){K(i,a,l),R(i,a,l)},O=function(r,p,u){var m,s,l=r.getBody();for(m=p[u?"startContainer":"endContainer"],s=p[u?"startOffset":"endOffset"],1===m.nodeType&&(m=m.childNodes[Math.min(s,m.childNodes.length-1)]||m);m.parentNode!==l;){if(F.isTextBlock(r,m)){return m}if(/^(TD|TH)$/.test(m.parentNode.nodeName)){return m}m=m.parentNode}return m},G=function(r,v){for(var m,C=[],V=r.getBody(),t=r.dom,U=O(r,v,!0),y=O(r,v,!1),x=[],e=U;e&&(x.push(e),e!==y);e=e.nextSibling){}return P.each(x,function(l){if(F.isTextBlock(r,l)){return C.push(l),void (m=null)}if(t.isBlock(l)||F.isBr(l)){return F.isBr(l)&&t.remove(l),void (m=null)}var a=l.nextSibling;return B.isBookmarkNode(l)&&(F.isTextBlock(r,a)||!a&&l.parentNode===V)?void (m=null):(m||(m=t.create("p"),l.parentNode.insertBefore(m,l),C.push(m)),void m.appendChild(l))}),C},M=function(p,x,v){var i,r=p.selection.getRng(!0),e="LI",m=p.dom;v=v?v:{},"false"!==m.getContentEditable(p.selection.getNode())&&(x=x.toUpperCase(),"DL"===x&&(e="DT"),i=L.createBookmark(r),P.each(G(p,r),function(t){var n,l,o=function(s){var a=m.getStyle(s,"list-style-type"),u=v?v["list-style-type"]:"";return u=null===u?"":u,a===u};l=t.previousSibling,l&&F.isListNode(l)&&l.nodeName===x&&o(l)?(n=l,t=m.rename(t,e),l.appendChild(t)):(n=m.create(x),t.parentNode.insertBefore(n,t),n.appendChild(t),t=m.rename(t,e)),Q(m,n,v),E(p.dom,n)}),p.selection.setRng(L.resolveBookmark(i)))},J=function(i){var a=L.createBookmark(i.selection.getRng(!0)),e=i.getBody(),n=I.getSelectedListItems(i),m=P.grep(n,function(l){return i.dom.isEmpty(l)});n=P.grep(n,function(l){return !i.dom.isEmpty(l)}),P.each(m,function(l){if(F.isEmpty(i.dom,l)){return void D.outdent(i,l)}}),P.each(n,function(o){var p,l;if(o.parentNode!==i.getBody()){for(p=o;p&&p!==e;p=p.parentNode){F.isListNode(p)&&(l=p)}H.splitList(i,l,o),T.normalizeLists(i.dom,l.parentNode)}}),i.selection.setRng(L.resolveBookmark(a))},N=function(i,a){return i&&a&&F.isListNode(i)&&i.nodeName===a.nodeName},z=function(o,l,p){var m=o.getStyle(l,"list-style-type",!0),a=o.getStyle(p,"list-style-type",!0);return m===a},q=function(i,a){return i.className===a.className},S=function(i,a,l){return N(a,l)&&z(i,a,l)&&q(a,l)},E=function(l,a){var m,i;if(m=a.nextSibling,S(l,a,m)){for(;i=m.firstChild;){a.appendChild(i)}l.remove(m)}if(m=a.previousSibling,S(l,a,m)){for(;i=m.lastChild;){a.insertBefore(i,a.firstChild)}l.remove(m)}},w=function(l,a,p){var i=l.dom.getParent(l.selection.getStart(),"OL,UL,DL");if(p=p?p:{},i!==l.getBody()){if(i){if(i.nodeName===a){J(l,a)}else{var m=L.createBookmark(l.selection.getRng(!0));Q(l.dom,i,p),E(l.dom,l.dom.rename(i,a)),l.selection.setRng(L.resolveBookmark(m))}}else{M(l,a,p)}}};return{toggleList:w,removeList:J,mergeWithAdjacentLists:E}}),b("5",["9","a","3","b","4","c","d","e","8"],function(E,J,x,q,A,w,H,K,z){var I=function(M,t,L){var i,p,e=t.startContainer,m=t.startOffset;if(3===e.nodeType&&(L?m<e.data.length:m>0)){return e}for(i=M.schema.getNonEmptyElements(),1===e.nodeType&&(e=J.getNode(e,m)),p=new E(e,M.getBody()),L&&A.isBogusBr(M.dom,e)&&p.next();e=p[L?"next":"prev2"]();){if("LI"===e.nodeName&&!e.hasChildNodes()){return e}if(i[e.nodeName]){return e}if(3===e.nodeType&&e.data.length>0){return e}}},G=function(p,l,u){var m,s,i=l.parentNode;if(A.isChildOfBody(p,l)&&A.isChildOfBody(p,u)){if(A.isListNode(u.lastChild)&&(s=u.lastChild),i===u.lastChild&&A.isBr(i.previousSibling)&&p.remove(i.previousSibling),m=u.lastChild,m&&A.isBr(m)&&l.hasChildNodes()&&p.remove(m),A.isEmpty(p,u,!0)&&p.$(u).empty(),!A.isEmpty(p,l,!0)){for(;m=l.firstChild;){u.appendChild(m)}}s&&u.appendChild(s),p.remove(l),A.isEmpty(p,i)&&i!==p.getRoot()&&p.remove(i)}},F=function(u,M){var l,a,N,L=u.dom,o=u.selection,i=L.getParent(o.getStart(),"LI");if(i){if(l=i.parentNode,l===u.getBody()&&A.isEmpty(L,l)){return !0}if(a=H.normalizeRange(o.getRng(!0)),N=L.getParent(I(u,a,M),"LI"),N&&N!==i){var m=w.createBookmark(a);return M?G(L,N,i):G(L,i,N),u.selection.setRng(w.resolveBookmark(m)),!0}if(!N&&!M&&z.removeList(u,l.nodeName)){return !0}}return !1},D=function(p,l){var u=p.dom,m=u.getParent(p.selection.getStart(),u.isBlock);if(m&&u.isEmpty(m)){var a=H.normalizeRange(p.selection.getRng(!0)),s=u.getParent(I(p,a,l),"LI");if(s){return p.undoManager.transact(function(){u.remove(m),z.mergeWithAdjacentLists(u,s.parentNode),p.selection.select(s,!0),p.selection.collapse(l)}),!0}}return !1},v=function(i,a){return F(i,a)||D(i,a)},B=function(i){var a=i.dom.getParent(i.selection.getStart(),"LI,DT,DD");return !!(a||q.getSelectedListItems(i).length>0)&&(i.undoManager.transact(function(){i.execCommand("Delete"),K.normalizeLists(i.dom,i.getBody())}),!0)},y=function(i,a){return i.selection.isCollapsed()?v(i,a):B(i)},C=function(a){a.on("keydown",function(e){e.keyCode===x.BACKSPACE?y(a,!1)&&e.preventDefault():e.keyCode===x.DELETE&&y(a,!0)&&e.preventDefault()})};return{setup:C,backspaceDelete:y}}),b("6",["h","4","c","b"],function(s,p,v,q){var m=function(o,e){var a;if(p.isListNode(o)){for(;a=o.firstChild;){e.appendChild(a)}s.remove(o)}},u=function(w){var i,t,e;return"DT"===w.nodeName?(s.rename(w,"DD"),!0):(i=w.previousSibling,i&&p.isListNode(i)?(i.appendChild(w),!0):i&&"LI"===i.nodeName&&p.isListNode(i.lastChild)?(i.lastChild.appendChild(w),m(w.lastChild,i.lastChild),!0):(i=w.nextSibling,i&&p.isListNode(i)?(i.insertBefore(w,i.firstChild),!0):(i=w.previousSibling,!(!i||"LI"!==i.nodeName)&&(t=s.create(w.parentNode.nodeName),e=s.getStyle(w.parentNode,"listStyleType"),e&&s.setStyle(t,"listStyleType",e),i.appendChild(t),t.appendChild(w),m(w.lastChild,t),!0))))},l=function(w){var r=q.getSelectedListItems(w);if(r.length){for(var o=v.createBookmark(w.selection.getRng(!0)),n=0;n<r.length&&(u(r[n])||0!==n);n++){}return w.selection.setRng(v.resolveBookmark(o)),w.nodeChanged(),!0}};return{indentSelection:l}}),b("0",["1","2","3","4","5","6","7","8"],function(y,D,q,m,w,p,B,E){var v=function(i,a){return function(){var e=i.dom.getParent(i.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===a}},C=function(a){a.on("BeforeExecCommand",function(e){var l,i=e.command.toLowerCase();if("indent"===i?p.indentSelection(a)&&(l=!0):"outdent"===i&&B.outdentSelection(a)&&(l=!0),l){return a.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}}),a.addCommand("InsertUnorderedList",function(e,i){E.toggleList(a,"UL",i)}),a.addCommand("InsertOrderedList",function(e,i){E.toggleList(a,"OL",i)}),a.addCommand("InsertDefinitionList",function(e,i){E.toggleList(a,"DL",i)})},A=function(a){a.addQueryStateHandler("InsertUnorderedList",v(a,"UL")),a.addQueryStateHandler("InsertOrderedList",v(a,"OL")),a.addQueryStateHandler("InsertDefinitionList",v(a,"DL"))},z=function(a){a.on("keydown",function(e){9!==e.keyCode||q.metaKeyPressed(e)||a.dom.getParent(a.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?B.outdentSelection(a):p.indentSelection(a))})},x=function(l){var o=function(e){return function(){var n=this;l.on("NodeChange",function(i){var r=D.grep(i.parents,m.isListNode);n.active(r.length>0&&r[0].nodeName===e)})}},a=function(s,t){var i=s.settings.plugins?s.settings.plugins:"";return D.inArray(i.split(/[ ,]/),t)!==-1};a(l,"advlist")||(l.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:o("OL")}),l.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:o("UL")})),l.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(e){var i=e.control;l.on("nodechange",function(){for(var u=l.selection.getSelectedBlocks(),r=!1,G=0,n=u.length;!r&&G<n;G++){var F=u[G].nodeName;r="LI"===F&&m.isFirstChild(u[G])||"UL"===F||"OL"===F||"DD"===F}i.disabled(r)})}})};return y.add("lists",function(a){return x(a),w.setup(a),a.on("init",function(){C(a),A(a),z(a)}),{backspaceDelete:function(e){w.backspaceDelete(a,e)}}}),function(){}}),g("0")()}();