tinymce.PluginManager.add("autoresize",function(k){function e(){return k.plugins.fullscreen&&k.plugins.fullscreen.isFullscreen()}function i(s){var u,a,m,c,y,D,b,r,g,p,f,d,v=tinymce.DOM;if(a=k.getDoc()){if(m=a.body,c=a.documentElement,y=h.autoresize_min_height,!m||s&&"setcontent"===s.type&&s.initial||e()){return void (m&&c&&(m.style.overflowY="auto",c.style.overflowY="auto"))}b=k.dom.getStyle(m,"margin-top",!0),r=k.dom.getStyle(m,"margin-bottom",!0),g=k.dom.getStyle(m,"padding-top",!0),p=k.dom.getStyle(m,"padding-bottom",!0),f=k.dom.getStyle(m,"border-top-width",!0),d=k.dom.getStyle(m,"border-bottom-width",!0),D=m.offsetHeight+parseInt(b,10)+parseInt(r,10)+parseInt(g,10)+parseInt(p,10)+parseInt(f,10)+parseInt(d,10),(isNaN(D)||D<=0)&&(D=tinymce.Env.ie?m.scrollHeight:tinymce.Env.webkit&&0===m.clientHeight?0:m.offsetHeight),D>h.autoresize_min_height&&(y=D),h.autoresize_max_height&&D>h.autoresize_max_height?(y=h.autoresize_max_height,m.style.overflowY="auto",c.style.overflowY="auto"):(m.style.overflowY="hidden",c.style.overflowY="hidden",m.scrollTop=0),y!==j&&(u=y-j,v.setStyle(k.iframeElement,"height",y+"px"),j=y,tinymce.isWebKit&&u<0&&i(s))}}function l(b,c,a){tinymce.util.Delay.setEditorTimeout(k,function(){i({}),b--?l(b,c,a):a&&a()},c)}var h=k.settings,j=0;k.settings.inline||(h.autoresize_min_height=parseInt(k.getParam("autoresize_min_height",k.getElement().offsetHeight),10),h.autoresize_max_height=parseInt(k.getParam("autoresize_max_height",0),10),k.on("init",function(){var b,a;b=k.getParam("autoresize_overflow_padding",1),a=k.getParam("autoresize_bottom_margin",50),b!==!1&&k.dom.setStyles(k.getBody(),{paddingLeft:b,paddingRight:b}),a!==!1&&k.dom.setStyles(k.getBody(),{paddingBottom:a})}),k.on("nodechange setcontent keyup FullscreenStateChanged",i),k.getParam("autoresize_on_init",!0)&&k.on("init",function(){l(20,100,function(){l(5,1000)})}),k.addCommand("mceAutoResize",i))});