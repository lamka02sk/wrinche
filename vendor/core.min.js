(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var l=typeof window!=="undefined"?window:this,f=l.document,a=function(){this.Version="@version";this.Plugins={};this.DontConflict=false;this.Conflicts={fn:{}};this.ResizeHandlers=[];this.RAFHandlers=[];this.window=l;this.$window=e(l);this.document=f;this.$document=e(f);this.$body=null;this.windowWidth=0;this.windowHeight=0;this.fallbackWidth=1024;this.fallbackHeight=768;this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera;this.isFirefox=/Firefox/i.test(this.userAgent);this.isChrome=/Chrome/i.test(this.userAgent);this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome;this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent);this.isIEMobile=/IEMobile/i.test(this.userAgent);this.isFirefoxMobile=(this.isFirefox&&this.isMobile);this.transform=null;this.transition=null;this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!!(window.matchMedia||window.msMatchMedia),pointer:!!(window.PointerEvent),raf:!!(window.requestAnimationFrame&&window.cancelAnimationFrame),touch:!!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:false,transform:false}},q={killEvent:function(u,s){try{u.preventDefault();u.stopPropagation();if(s){u.stopImmediatePropagation()}}catch(t){}},startTimer:function(v,t,u,s){q.clearTimer(v);return(s)?setInterval(u,t):setTimeout(u,t)},clearTimer:function(t,s){if(t){if(s){clearInterval(t)}else{clearTimeout(t)}t=null}},sortAsc:function(t,s){return(parseInt(t,10)-parseInt(s,10))},sortDesc:function(t,s){return(parseInt(s,10)-parseInt(t,10))},decodeEntities:function(s){var t=n.document.createElement("textarea");t.innerHTML=s;return t.value},parseQueryString:function(t){var w={},v=t.slice(t.indexOf("?")+1).split("&");for(var u=0;u<v.length;u++){var s=v[u].split("=");w[s[0]]=s[1]}return w}},n=new a(),h=e.Deferred(),i={base:"{ns}",element:"{ns}-element"},m={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};a.prototype.NoConflict=function(){n.DontConflict=true;for(var s in n.Plugins){if(n.Plugins.hasOwnProperty(s)){e[s]=n.Conflicts[s];e.fn[s]=n.Conflicts.fn[s]}}};a.prototype.Plugin=function(t,s){n.Plugins[t]=(function(x,y){var u="fs-"+x,C="fs."+x,D="fs"+x.replace(/(^|\s)([a-z])/g,function(G,I,H){return I+H.toUpperCase()});function A(Q){var N=e.type(Q)==="object",G=this,I=e(),P,L,M;Q=e.extend(true,{},y.defaults||{},(N?Q:{}));for(L=0,M=G.length;L<M;L++){P=G.eq(L);if(!B(P)){var O="__"+y.guid++,J=y.classes.raw.base+O,H=P.data(x+"-options"),K=e.extend(true,{$el:P,guid:O,rawGuid:J,dotGuid:"."+J},Q,(e.type(H)==="object"?H:{}));P.addClass(y.classes.raw.element).data(D,K);y.methods._construct.apply(P,[K].concat(Array.prototype.slice.call(arguments,(N?1:0))));I=I.add(P)}}for(L=0,M=I.length;L<M;L++){P=I.eq(L);y.methods._postConstruct.apply(P,[B(P)])}return G}function E(G){y.functions.iterate.apply(this,[y.methods._destruct].concat(Array.prototype.slice.call(arguments,1)));this.removeClass(y.classes.raw.element).removeData(D)}function B(G){return G.data(D)}function F(H){if(this instanceof e){var G=y.methods[H];if(e.type(H)==="object"||!H){return A.apply(this,arguments)}else{if(G&&H.indexOf("_")!==0){return y.functions.iterate.apply(this,[G].concat(Array.prototype.slice.call(arguments,1)))}}return this}}function w(H){var G=y.utilities[H]||y.utilities._initialize||false;if(G){return G.apply(window,Array.prototype.slice.call(arguments,(e.type(H)==="object"?0:1)))}}function z(G){y.defaults=e.extend(true,y.defaults,G||{})}function v(I){var L=this;for(var H=0,J=L.length;H<J;H++){var G=L.eq(H),K=B(G)||{};if(e.type(K.$el)!=="undefined"){I.apply(G,[K].concat(Array.prototype.slice.call(arguments,1)))}}return L}y.initialized=false;y.priority=y.priority||10;y.classes=p("classes",u,i,y.classes);y.events=p("events",x,m,y.events);y.functions=e.extend({getData:B,iterate:v},q,y.functions);y.methods=e.extend(true,{_setup:e.noop,_construct:e.noop,_postConstruct:e.noop,_destruct:e.noop,_resize:false,destroy:E},y.methods);y.utilities=e.extend(true,{_initialize:false,_delegate:false,defaults:z},y.utilities);if(y.widget){n.Conflicts.fn[x]=e.fn[x];e.fn[D]=F;if(!n.DontConflict){e.fn[x]=e.fn[D]}}n.Conflicts[x]=e[x];e[D]=y.utilities._delegate||w;if(!n.DontConflict){e[x]=e[D]}y.namespace=x;y.namespaceClean=D;y.guid=0;if(y.methods._resize){n.ResizeHandlers.push({namespace:x,priority:y.priority,callback:y.methods._resize});n.ResizeHandlers.sort(g)}if(y.methods._raf){n.RAFHandlers.push({namespace:x,priority:y.priority,callback:y.methods._raf});n.RAFHandlers.sort(g)}return y})(t,s);h.then(function(){k(t)});return n.Plugins[t]};function k(s){if(!n.Plugins[s].initialized){n.Plugins[s].methods._setup.call(document);n.Plugins[s].initialized=true}}function p(x,w,t,v){var s={raw:{}},u;v=v||{};for(u in v){if(v.hasOwnProperty(u)){if(x==="classes"){s.raw[v[u]]=w+"-"+v[u];s[v[u]]="."+w+"-"+v[u]}else{s.raw[u]=v[u];s[u]=v[u]+"."+w}}}for(u in t){if(t.hasOwnProperty(u)){if(x==="classes"){s.raw[u]=t[u].replace(/{ns}/g,w);s[u]=t[u].replace(/{ns}/g,"."+w)}else{s.raw[u]=t[u].replace(/.{ns}/g,"");s[u]=t[u].replace(/{ns}/g,w)}}}return s}function j(){var z={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},u=["transition","-webkit-transition"],y={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},t="transitionend",x="",v="",w=document.createElement("div"),s;for(s in z){if(z.hasOwnProperty(s)&&s in w.style){t=z[s];n.support.transition=true;break}}m.transitionEnd=t+".{ns}";for(s in u){if(u.hasOwnProperty(s)&&u[s] in w.style){x=u[s];break}}n.transition=x;for(s in y){if(y.hasOwnProperty(s)&&y[s] in w.style){n.support.transform=true;v=y[s];break}}n.transform=v}var r=null,c=20;function b(){n.windowWidth=n.$window.width();n.windowHeight=n.$window.height();r=q.startTimer(r,c,o)}function o(){for(var s in n.ResizeHandlers){if(n.ResizeHandlers.hasOwnProperty(s)){n.ResizeHandlers[s].callback.call(window,n.windowWidth,n.windowHeight)}}}n.$window.on("resize.fs",b);b();function d(){if(n.support.raf){n.window.requestAnimationFrame(d);for(var s in n.RAFHandlers){if(n.RAFHandlers.hasOwnProperty(s)){n.RAFHandlers[s].callback.call(window)}}}}d();function g(t,s){return(parseInt(t.priority)-parseInt(s.priority))}e(function(){n.$body=e("body");h.resolve();n.support.nativeMatchMedia=n.support.matchMedia&&!e("html").hasClass("no-matchmedia")});m.clickTouchStart=m.click+" "+m.touchStart;j();window.Formstone=n;return n}));