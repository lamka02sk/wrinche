componentsModule.modules.video={data:{},valid:{},videoType:function(a){if(/^((?:https?:)?\/\/)?((?:www|m|player)\.)?((?:vimeo\.com))(?:$|\/|)(\S+)?$/gm.test(a)){return 1}else{if(/(https?:\/\/.*?youtube\.com)\/watch\?v=(.*)/igm.test(a)){return 0}else{return -1}}},loadExternalVideo:function(a,b,d,c){document.querySelector("div.media-manager span.close-manager").click();let video=document.createElement("video");video.setAttribute("src",d);video.classList.add("item-player");video.setAttribute("controls","true");video.volume=0.5;let contentElement=b.querySelector("div.component-element-content");contentElement.classList.add("no-padding");contentElement.querySelector("div.select-image").classList.add("hide");c.insertBefore(video,c.children[0]);contentElement.appendChild(c);c.children[1].innerText=d;video.addEventListener("loadedmetadata",function(){let duration=video.duration;let minutes=parseInt(duration/60,10);let seconds=duration%60;let time=minutes+":"+pad(Math.round(seconds),2);let width=video.videoWidth;let height=video.videoHeight;let dimensions=width+"x"+height;c.children[2].innerText=time;c.children[3].innerText=dimensions});c.children[5].addEventListener("click",function(){componentsModule.modules.video.removeInstance(a,contentElement,c)})},removeInstance:function(a,c,b){c.querySelector("div.input-box.select-image").classList.remove("hide");c.removeChild(b);c.classList.remove("no-padding");delete componentsModule.modules.video.data[a]},remove:function(a){a.querySelectorAll("div.component-instance").forEach(function(b){b.querySelector("span.item-remove").click()})},onSelect:function(a,b,d,c){componentsModule.modules.video.remove(b);if(!c){d="app/Data/Files/Videos/"+d}componentsModule.modules.video.data[a]={title:"",video:d,video_description:false,video_align:1,type:-1,valid:true,disabled:0};let type=componentsModule.modules.video.videoType(d);let template=b.querySelector("#template_component_content_video_item").children[0].cloneNode(true);template.setAttribute("data-path",d);switch(type){case -1:componentsModule.modules.video.loadExternalVideo(a,b,d,template);break;case 0:break;case 1:break;default:return false;break}},create:function(a,b){componentsModule.initializeEvents([{event:"click",element:b.querySelector("button.inline-image_manager"),content:function(){managerActiveInstance=new MediaManager({manager:"videos",onSelect:function(c){componentsModule.modules.video.onSelect(a,b,c,false)}})}}])},validate:function(){return true},serialize:function(){return componentsModule.modules.video.data}};