componentsModule.modules.attachments={attachmentsElement:document.querySelector("label[for=component_attachments]").parentNode,attachmentsList:document.querySelector("label[for=component_attachments]").parentNode.querySelector("div.attachments-list"),data:{attachments:[]},addNew:function(b,a){let prePath="app/Data/Files/";let fileType;switch(a){case"images":b=prePath+"Images/"+b;fileType="image";break;case"videos":b=prePath+"Videos/"+b;fileType="video";break;case"sounds":b=prePath+"Sounds/"+b;fileType="audio";break;default:b=prePath+"Files/"+b;fileType="file";break}if(componentsModule.modules.attachments.data.attachments.indexOf(b)!==-1){$("div.media-manager span.close-manager").click();return false}let template=componentsModule.modules.attachments.attachmentsElement.querySelector("#template_component_attachments_added").childNodes[0].cloneNode(true);template.classList.add("component-instance");template.setAttribute("data-path",b);template.classList.add("icon-"+fileType);template.childNodes[1].innerText=b;componentsModule.modules.attachments.attachmentsList.insertBefore(template,componentsModule.modules.attachments.attachmentsList.childNodes[0]);componentsModule.modules.attachments.data.attachments.push(b);template.querySelector("span.attachment-remove").addEventListener("click",function(){template.parentNode.removeChild(template);componentsModule.modules.attachments.data.attachments.splice(componentsModule.modules.attachments.data.attachments.indexOf(b),1);packery.packery().reloadItems()});$("div.media-manager span.close-manager").click();packery.packery().reloadItems()},serialize:function(){return componentsModule.modules.attachments.data.attachments},validate:function(){return true},events:[{event:"click",element:document.querySelector("label[for=component_attachments]").parentNode.querySelectorAll("button.add-attachment"),content:function(a){let type=a.target.getAttribute("data-content");managerActiveInstance=new MediaManager({manager:type,onSelect:function(b){componentsModule.modules.attachments.addNew(b,type)}})}}]};