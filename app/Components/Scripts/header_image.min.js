componentsModule.modules.header_image={start:function(){let current=componentsModule.modules.header_image;current.parentElement=document.querySelector("[data-component=header_image]");current.inputBox=current.parentElement.querySelector(".input-box");current.mediaButton=current.inputBox.querySelector(".image_manager");current.mediaInput=current.inputBox.querySelector("input");current.messageElement=current.inputBox.querySelector(".validate-message");current.templateElement=current.parentElement.querySelector("#template_component_header-image_image").childNodes[0];componentsModule.initializeEvents([{event:"click",element:current.parentElement,content:function(a){if(a.target.matches(".image_manager")){managerActiveInstance=new MediaManager({manager:"images",onSelect:function(b){current.addNew(b,false)}})}else{if(a.target.matches(".header_image-remove")){current.inputBox.classList.remove("hide");current.parentElement.removeChild(current.parentElement.querySelector("div.component-instance"));reloadPackery()}}}},{event:"keypress",element:current.mediaInput,content:function(a){if(!a.keyCode||a.keyCode!==13){return false}let path=a.target.value.trim();current.validateInput(path,function(){current.addNew(path,true)})}},{event:"change keyup",element:current.mediaInput,content:function(a){current.validateInput(a.target.value.trim())}}])},resume:function(){let current=componentsModule.modules.header_image;const b=current.parentElement.getAttribute("data-resume");if(b===""){return true}const a=JSON.parse(b).header_image;if(a===""){return true}current.addNew(a,!(~a.indexOf("app/Data/Files/Images/")))},removeCurrent:function(a){if(a.querySelector("div.header_image-image.component-instance")){a.removeChild(a.querySelector("div.header_image-image.component-instance"))}},addNew:function(b,a){b=b.replace("app/Data/Files/Images/","");let current=componentsModule.modules.header_image;let text=b;let template=current.templateElement.cloneNode(true);current.removeCurrent(current.parentElement);current.inputBox.value="";if(!a){b="app/Data/Files/Images/"+b}template.setAttribute("data-path",b);template.classList.add("component-instance");template.childNodes[0].setAttribute("src",b);template.childNodes[0].setAttribute("alt",b);template.childNodes[1].innerText=text;current.parentElement.appendChild(template);current.inputBox.classList.add("hide");closeMediaManager();reloadPackery()},validateInput:function(b,c,a){let current=componentsModule.modules.header_image;if(!validateUrl(b)){return showValidationResult(current.messageElement,"COMPONENT_URL_INVALID",false,reloadPackery)}new Promise(function(d){let image=new Image;image.onload=function(){d(true)};image.onerror=function(){d(false)};image.src=b}).then(function(d){if(d){showValidationResult(current.messageElement,"COMPONENT_URL_INVALID",true,reloadPackery);if(c){c()}}else{showValidationResult(current.messageElement,"COMPONENT_URL_INVALID",false,reloadPackery);if(a){a()}}})},validate:function(){return true},serialize:function(){let current=componentsModule.modules.header_image;let instance=current.parentElement.querySelector("div.header_image-image.component-instance");let data="";if(instance){data=instance.getAttribute("data-path")}return{header_image:data}}};