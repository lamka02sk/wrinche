componentsModule.modules.picture={data:{},valid:{},showError:function(b,a){let messageElement=b.querySelector("span.field-validation");messageElement.setAttribute("data-locale","COMPONENT_URL_INVALID");messageElement.innerText=translate.locale.components.COMPONENT_URL_INVALID;messageElement.classList.add("show");componentsModule.modules.picture.valid[a]={valid:false}},hideError:function(b,a){let messageElement=b.querySelector("span.field-validation");messageElement.classList.remove("show");componentsModule.modules.picture.valid[a]={valid:true}},validateInput:function(c,b,a){if(!/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(a)){componentsModule.modules.picture.showError(c,b);return false}let promise=new Promise(function(e,d){let image=new Image;image.onload=function(){e(true)};image.onerror=function(){e(false)};image.src=a});promise.then(function(d){if(d){componentsModule.modules.picture.hideError(c,b)}else{componentsModule.modules.picture.showError(c,b)}})},remove:function(a){a.querySelectorAll("div.component-instance").forEach(function(b){b.querySelector("span.picture-remove").click()})},onSelect:function(a,b,d,c){let contentElement=b.querySelector("div.component-element-content");contentElement.classList.add("no-padding");componentsModule.modules.picture.remove(b);if(!c){d="app/Data/Files/Images/"+d}componentsModule.modules.picture.data[a]={title:"",picture:d,picture_description:"",picture_align:1,valid:true,disabled:0};let template=contentElement.querySelector("#template_component_content_picture_image").children[0].cloneNode(true);template.setAttribute("data-path",d);template.classList.add("component-instance");template.children[0].setAttribute("src",d);template.children[0].setAttribute("alt",d);contentElement.appendChild(template);template.children[0].addEventListener("load",function(){contentElement.querySelector("div.input-box.select-image").classList.add("hide");document.querySelector("div.media-manager span.close-manager").click()});let alignOptions=template.children[3].querySelectorAll("span");componentsModule.initializeEvents([{event:"change keyup",element:template.children[2],content:function(e){componentsModule.modules.picture.data[a].picture_description=e.target.value.trim()}},{event:"click",element:alignOptions,content:function(e){componentsModule.modules.picture.data[a].picture_align=+e.target.getAttribute("data-value");alignOptions.forEach(function(f){f.classList.remove("active")});e.target.classList.add("active")}}]);template.children[1].addEventListener("click",function(){contentElement.querySelector("div.input-box.select-image").classList.remove("hide");contentElement.removeChild(template);contentElement.classList.remove("no-padding");delete componentsModule.modules.picture.data[a]})},create:function(a,b){componentsModule.initializeEvents([{event:"click",element:b.querySelector("button.inline-image_manager"),content:function(){managerActiveInstance=new MediaManager({manager:"images",onSelect:function(c){componentsModule.modules.picture.onSelect(a,b,c,false)}})}},{event:"keypress",element:b.querySelector("input[name=component_inline_picture_input]"),content:function(c){if(c.keyCode&&c.keyCode===13){let path=c.target.value;componentsModule.modules.picture.validateInput(b,a,path);if(componentsModule.modules.picture.valid[a].valid){componentsModule.modules.picture.onSelect(a,b,path,true)}}}},{event:"change keyup",element:b.querySelector("input[name=component_inline_picture_input]"),content:function(c){componentsModule.modules.picture.validateInput(b,a,c.target.value)}}])},validate:function(){return true},serialize:function(){return componentsModule.module.picture.data}};