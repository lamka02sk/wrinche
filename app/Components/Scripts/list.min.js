componentsModule.modules.list={data:{},itemClone:false,validate:function(){return true},serialize:function(){return componentsModule.modules.list.data},resumeInline:function(b,c,a){let current=componentsModule.modules.list;let listElement=current.create(b,c,a);a.list.forEach(function(f,d){if(f===""){return true}const e=a.list_checked[d]||0;current.createItem(b,listElement,undefined,false,[f.trim(),e])});if(current.data[b].list.length<1){current.createItem(b,listElement)}},reloadItems:function(a,b){let newOrder=[];let newContent=[];let newChecked=[];let current=componentsModule.modules.list;b.querySelectorAll(".list-item").forEach(function(d,c){newOrder.push(parseFloat(d.getAttribute("data-item")));d.querySelector(".item-number").innerText=+c+1+".";let text=d.querySelector("p").innerText.trim();if(text===current.itemClone.querySelector("p").innerText.trim()){text=""}newContent.push(text);newChecked.push(d.querySelector(".item-check").classList.contains("checked"))});current.data[a].list=newContent;current.data[a].list_checked=newChecked;current.data[a].order=newOrder},createItem:function(b,c,g,a,f){if(!f){f=[]}let current=componentsModule.modules.list;let itemID=Math.random()*(99999-10000)+10000;let index;const d=f[1]||false;const e=f[0]||"";if(!g){current.data[b].list.push(e);current.data[b].list_checked.push(d);current.data[b].order.push(itemID);index=+current.data[b].order.indexOf(itemID)}else{index=+current.data[b].order.indexOf(g);if(index===-1){return false}index+=1;current.data[b].list.splice(index,0,e);current.data[b].list_checked.splice(index,0,d);current.data[b].order.splice(index,0,itemID)}let itemElement=current.itemClone.cloneNode(true);itemElement.setAttribute("data-item",itemID.toString());itemElement.querySelector(".item-number").innerText=+index+1+".";let itemText=itemElement.querySelector("p");let itemCheck=itemElement.querySelector(".item-check");componentsModule.initializeEvents([{event:"click",element:itemCheck,content:function(h){h.target.classList.toggle("checked");let index=current.data[b].order.indexOf(itemID);current.data[b].list_checked[index]=h.target.classList.contains("checked")}},{event:"focus",element:itemText,content:function(h){if(h.target.innerText.trim()!==current.itemClone.querySelector("p").innerText){return false}h.target.classList.remove("item-text-placeholder");h.target.innerText=""}},{event:"blur",element:itemText,content:function(h){let nextItem=h.target.parentNode.nextSibling;if(h.target.innerText.trim()!==""&&nextItem===null){current.createItem(b,c,itemID,true)}if(h.target.innerText.trim()!==""){return false}h.target.classList.add("item-text-placeholder");h.target.innerText=current.itemClone.querySelector("p").innerText}},{event:"keydown",element:itemText,content:function(h){if(h.keyCode!==13){return false}let currentItem=h.target.parentNode;let nextItem=currentItem.nextSibling;if(nextItem!==null){nextItem.querySelector("p").focus()}else{h.target.blur()}h.preventDefault()}},{event:"keyup change",element:itemText,content:function(h){current.data[b].list[index]=h.target.innerText.trim()}},{event:"click",element:itemElement.querySelector(".list-item-delete"),content:function(h){if(c.children.length<2){return false}let index=current.data[b].order.indexOf(itemID);if(index===-1){return false}current.data[b].list.splice(index,1);current.data[b].order.splice(index,1);current.data[b].list_checked.splice(index,1);c.removeChild(itemElement);current.reloadItems(b,c)}}]);if(!g){c.appendChild(itemElement)}else{if(!current.data[b].order[index+1]){c.appendChild(itemElement)}else{c.insertBefore(itemElement,c.children[index+1])}}itemText.innerText=f[0]||itemText.innerText;itemText.classList.add("item-text-placeholder");if(f[1]===1){itemCheck.click()}if(a){itemText.focus()}},create:function(b,c,a){let current=componentsModule.modules.list;let contentElement=c.querySelector(".component-element-content");let listElement=contentElement.querySelector(".component-inline-list-content");let listItem=listElement.querySelector(".list-item");if(!current.itemClone){current.itemClone=listItem.cloneNode(true)}listElement.removeChild(listItem);current.data[b]={title:"",disabled:0,list:[],order:[],list_checked:[],list_title:"",list_type:0,list_position:1};Sortable.create(listElement,{sort:true,animation:200,scroll:false,draggable:".list-item",handle:".list-item-move",onStart:function(d){d.item.classList.add("chosen")},onEnd:function(d){d.item.classList.remove("chosen");current.reloadItems(b,listElement)}});let typeItems=contentElement.querySelectorAll(".component-list_type .position-item");let positionItems=contentElement.querySelectorAll(".component-list_align .position-item");let nameInput=contentElement.querySelector("input[name=component_inline_list_name]");componentsModule.initializeEvents([{event:"change keyup",element:nameInput,content:function(d){current.data[b].list_title=d.target.value.trim()}},{event:"click",element:typeItems,content:function(d){listElement.setAttribute("data-type",current.data[b].list_type=d.target.getAttribute("data-position"));typeItems.forEach(function(e){e.classList.remove("active")});d.target.classList.add("active")}},{event:"click",element:positionItems,content:function(d){current.data[b].list_position=d.target.getAttribute("data-position");positionItems.forEach(function(e){e.classList.remove("active")});d.target.classList.add("active")}}]);if(a!==undefined){nameInput.value=a.list_title.trim();triggerEvent(nameInput,"change");typeItems[+a.list_type].click();positionItems[+a.list_position].click()}if(!a){current.createItem(b,listElement)}return listElement}};