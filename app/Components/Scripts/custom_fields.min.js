componentsModule.modules.custom_fields={start:function(){let current=componentsModule.modules.custom_fields;current.parentElement=document.querySelector("[data-component=custom_fields]");current.listElement=current.parentElement.querySelector(".custom_fields-list");current.identifierInput=current.parentElement.querySelector("#component_custom-fields_add_name");current.valueInput=current.parentElement.querySelector("#component_custom-fields_add_value");current.addButton=current.parentElement.querySelector(".add-custom_field");current.templateElement=current.parentElement.querySelector("#template_component_custom-fields_field").childNodes[0];componentsModule.initializeEvents([{event:"click",element:current.parentElement,content:function(a){let target=a.target;if(target.matches(".add-custom_field")){current.addField()}else{if(target.matches(".edit-custom_field")){let item=target.parentNode;current.identifierInput.value=item.childNodes[0].innerText.trim();current.valueInput.value=item.childNodes[1].innerText.trim();current.listElement.removeChild(item);current.identifierInput.focus();reloadPackery()}else{if(target.matches(".remove-custom_field")){current.listElement.removeChild(target.parentNode);current.identifierInput.focus();reloadPackery()}}}}},{event:"keydown",element:current.valueInput,content:function(a){if(a.keyCode&&a.keyCode===13){current.addButton.click()}}}])},resume:function(){let current=componentsModule.modules.custom_fields;const b=current.parentElement.getAttribute("data-resume");if(b===""){return true}const a=JSON.parse(b).custom_fields;if(a===null){return true}Object.keys(a).map(function(c){current.addField(c,a[c])})},addField:function(d,c){let current=componentsModule.modules.custom_fields;const a=d||current.identifierInput.value.trim();const b=c||current.valueInput.value.trim();if(a===""||b===""){return true}if(current.serialize().custom_fields[a]){current.identifierInput.value="";current.identifierInput.focus();current.valueInput.value="";return true}let template=current.templateElement.cloneNode(true);template.childNodes[0].innerText=a;template.childNodes[1].innerText=b;current.listElement.insertBefore(template,current.listElement.childNodes[0]);d||current.identifierInput.focus();current.identifierInput.value="";current.valueInput.value="";reloadPackery()},validate:function(){return true},serialize:function(){let fieldElements=componentsModule.modules.custom_fields.listElement.childNodes;let data={};Array.from(fieldElements).map(function(a){data[a.childNodes[0].innerText.trim()]=a.childNodes[1].innerText.trim()});return{custom_fields:data}}};