componentsModule.modules.thumbnail={messageElement:document.querySelector("label[for=component_thumbnail]").parentNode.querySelector("span.field-validation"),valid:false,data:{thumbnail:""},removeThis:function(a){if(a.querySelector("div.thumbnail-image.component-instance")){a.removeChild(a.querySelector("div.thumbnail-image.component-instance"))}},addNew:function(b,a){let parentElement=document.querySelector("label[for=component_thumbnail]").parentNode;componentsModule.modules.thumbnail.removeThis(parentElement);if(!a){b="app/Data/Files/Images/"+b}componentsModule.modules.thumbnail.data.thumbnail=b;let template=parentElement.querySelector("#template_component_thumbnail_image").childNodes[0].cloneNode(true);template.setAttribute("data-path",b);template.classList.add("component-instance");template.childNodes[0].setAttribute("src",b);template.childNodes[0].setAttribute("alt",b);template.childNodes[1].innerText=b;parentElement.appendChild(template);template.childNodes[0].addEventListener("load",function(){parentElement.querySelector("div.input-box").classList.add("hide");document.querySelector("div.media-manager span.close-manager").click();packery.packery().reloadItems()});template.childNodes[2].addEventListener("click",function(){parentElement.querySelector("div.input-box").classList.remove("hide");parentElement.removeChild(parentElement.querySelector("div.component-instance"));componentsModule.modules.thumbnail.data.thumbnail="";packery.packery().reloadItems()})},showError:function(){componentsModule.modules.thumbnail.messageElement.setAttribute("data-locale","COMPONENT_URL_INVALID");componentsModule.modules.thumbnail.messageElement.innerText=translate.locale.components.COMPONENT_URL_INVALID;componentsModule.modules.thumbnail.messageElement.classList.add("show");componentsModule.modules.thumbnail.valid=false;setTimeout(function(){packery.packery().reloadItems()},150)},hideError:function(){componentsModule.modules.thumbnail.messageElement.classList.remove("show");componentsModule.modules.thumbnail.valid=true;setTimeout(function(){packery.packery().reloadItems()},150)},validateInput:function(a){if(!/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(a)){componentsModule.modules.thumbnail.showError();return false}let promise=new Promise(function(c,b){let image=new Image;image.onload=function(){c(true)};image.onerror=function(){c(false)};image.src=a});promise.then(function(b){if(b){componentsModule.modules.thumbnail.hideError()}else{componentsModule.modules.thumbnail.showError()}})},validate:function(){return true},serialize:function(){return componentsModule.modules.thumbnail.data},events:[{event:"click",element:document.querySelector("label[for=component_thumbnail]").parentNode.querySelector("button.image_manager"),content:function(){managerActiveInstance=new MediaManager({manager:"images",onSelect:function(a){componentsModule.modules.thumbnail.addNew(a,false)}})}},{event:"keypress",element:document.querySelector("input[name=component_thumbnail_input]"),content:function(a){if(a.keyCode&&a.keyCode===13){let path=a.target.value;componentsModule.modules.thumbnail.validateInput(path);if(componentsModule.modules.thumbnail.valid){componentsModule.modules.thumbnail.addNew(path,true)}}}},{event:"change keyup",element:document.querySelector("input[name=component_thumbnail_input]"),content:function(a){componentsModule.modules.thumbnail.validateInput(a.target.value)}}]};